<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sorteio Inteligente</title>

  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="192x192" type="image/png">
  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="512x512" type="image/png">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">


	
 <style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

  /* T√≠tulo principal com efeito neon animado */
  .neon-titulo {
    font-family: 'Orbitron', sans-serif;
    font-size: 48px;
    text-align: center;
    margin-top: 30px;
    letter-spacing: 2px;
    background: linear-gradient(90deg, #ff00cc, #00ffff, #ffcc00, #ff00cc);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: neonColor 6s ease infinite, brilhoFlash 2s infinite alternate;
    text-shadow:
      0 0 5px #fff,
      0 0 10px #ff00cc,
      0 0 15px #00ffff,
      0 0 20px #ffcc00;
  }

  @keyframes neonColor {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes brilhoFlash {
    0% {
      text-shadow:
        0 0 5px #00ffd5,
        0 0 10px #00ffd5,
        0 0 20px #00ffd5,
        0 0 40px #00ff88;
    }
    100% {
      text-shadow:
        0 0 10px #ff00ff,
        0 0 20px #ff00ff,
        0 0 40px #ff00ff,
        0 0 60px #ff00ff;
    }
  }

  /* Subt√≠tulo com brilho sutil */
  #subtituloPrincipal {
    font-family: 'Orbitron', sans-serif;
    font-size: 18px;
    color: #ffffff;
    text-shadow: 0 0 3px #00ffff;
    text-align: center;
    margin-bottom: 20px;
  }

  /* Fundo escuro para destacar o neon */
  body {
    background-color: #000;
    color: #ffd700;
    font-family: 'Orbitron', Arial, sans-serif;
    text-align: center;
    overflow-x: hidden;
    margin: 0;
    padding: 0;
  }

  * { box-sizing: border-box; }

  /* Splash com gradiente animado */
  #splash {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: linear-gradient(135deg, #0a0a0a, #1a1a1a, #000);
    background-size: 200% 200%;
    animation: bgMove 8s ease infinite;
    color: #00ffd5;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    font-size: 24px;
  }

  @keyframes bgMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  input[type="text"],
  input[type="password"] {
    width: 290px;
    padding: 12px;
    margin: 10px 0;
    border: none;
    border-radius: 8px;
    background: #121212;
    color: #00ffd5;
    font-family: 'Orbitron', sans-serif;
    font-size: 16px;
    text-align: center;
    box-shadow: 0 0 10px #00ffd5, 0 0 20px #00ff88;
    outline: none;
    transition: box-shadow 0.3s ease, transform 0.2s ease;
  }

  input[type="text"]:focus,
  input[type="password"]:focus {
    box-shadow: 0 0 15px #ff00ff, 0 0 30px #00ffff;
    transform: scale(1.05);
  }

  #conteudo-principal {
    display: none;
    animation: fadeInMain 1s ease forwards;
    max-width: 100%;
    padding: 10px;
  }

  @keyframes fadeInMain {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  #entradaTopo {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin: 20px auto;
    width: 100%;
    max-width: 600px;
    padding: 10px;
  }

  #entradaTopo input {
    width: 100%;
    height: 56px;
    font-size: 20px;
    font-weight: bold;
    border-radius: 6px;
    background-color: #303030;
    color: #fff;
    box-shadow: 0 0 4px #00ffd5;
    border: 1px solid #00ffd5;
    text-align: center;
  }

  button {
    background-color: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    border: 1px solid #ffffff;
    padding: 14px;
    border-radius: 8px;
    font-weight: bold;
    font-size: 16px;
    cursor: pointer;
    margin: 5px;
    width: 100%;
    max-width: 280px;
    box-shadow: 0 0 12px rgba(255, 255, 255, 0.6);
    text-transform: uppercase;
    letter-spacing: 1px;
    backdrop-filter: blur(6px);
  }

  button:hover {
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
    transform: scale(1.05);
  }

  .painel-botoes,
  .grupo-controle {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin: 20px auto;
    width: 100%;
    max-width: 600px;
    padding: 0 10px;
  }

  #infoConcursoContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin-top: 12px;
  }

  #infoConcurso {
    display: block;
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
    padding: 8px 0;
    font-size: clamp(1.4rem, 2vw, 2rem);
    font-weight: 600;
    text-align: center;
    color: #00ffd5;
    border-bottom: 2px solid #00ffd5;
    transition: all 0.3s ease-in-out;
  }

  /* Responsividade corrigida para celular */
  @media (max-width: 480px) {
    #infoConcursoContainer { padding-top: 5px; }   /* üîπ reduzido */
    #infoConcurso { font-size: 1.2rem; margin: 5px 0; }
    h1 { font-size: 18px; margin: 5px 0; }
    #subtituloPrincipal { font-size: 14px; margin: 5px 0; }
    #entradaTopo {
      grid-template-columns: repeat(3, 1fr);
      gap: 6px;
      padding: 5px;
    }
  }

  .botao-3d:hover {
    background: linear-gradient(145deg, #222, #333);
    transform: translateY(-4px) scale(1.07);
    box-shadow:
      8px 8px 16px #0d0d0d,
      -8px -8px 16px #3a3a3a,
      inset 0 0 12px rgba(255, 255, 255, 0.3);
    -webkit-text-stroke: 0.6px #e0e0e0;
  }

 .botao-3d:active {
  transform: translateY(2px) scale(0.96);
  box-shadow:
    inset 4px 4px 8px #0d0d0d,
    inset -4px -4px 8px #3a3a3a;
  -webkit-text-stroke: 0.6px #d0d0d0; /* contorno branco suave */
}

/* Status */
#statusAtualizacao {
  margin-top: 15px;
  padding: 10px;
  font-weight: bold;
  font-size: 16px;
  border-radius: 6px;
  background-color: #111;
  color: #00ffd5;
  border: 1px solid #00ffd5;
}



/* Container principal */
#resultadoDinamico {
  margin-top: 15px;
}

/* T√≠tulo do concurso */
#resultadoDinamico h3 {
  color: #00ffd5;
  font-size: 20px;
  margin-bottom: 10px;
  border-bottom: 2px solid #00ffd5;
  display: inline-block;
}

/* Grid das dezenas */
.dezenas-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(36px, 1fr)); /* üîπ caixas um pouco maiores */
  gap: 3px;               
  margin: 5px auto;        /* centraliza e reduz margem lateral */
  width: 90%;              /* üîπ ocupa quase toda a tela em celular */
  max-width: 340px;        /* üîπ largura m√°xima padr√£o */
  background-color: #111;  
  border: 1px solid #00ffd5;
  border-radius: 6px;
  padding: 8px;
}

/* Cada dezena */
.dezena-input {
  background-color: #000;
  font-weight: bold;
  font-family: 'Orbitron', Arial, sans-serif;
  color: #FFA500;
  text-align: center;
  border: 1px solid #00ffd5;
  border-radius: 4px;
  padding: 3px 6px;        /* üîπ espa√ßo interno ajustado */
  font-size: 13px;
  width: 100%;
  box-sizing: border-box;
}

/* √öltimo jogo sugerido */
.jogo-sugerido {
  margin-top: 10px;
  font-size: 15px;
}

/* Bloco final com array */
.bloco-final {
  margin-top: 15px;
  padding: 8px;
  background-color: #111;
  border: 1px solid #00ffd5;
  border-radius: 6px;
  color: #ddd;
  width: 90%;              /* üîπ ocupa quase toda a tela em celular */
  max-width: 360px;        /* üîπ largura m√°xima padr√£o */
  margin-left: auto;
  margin-right: auto;      /* centraliza */
}

/* Responsividade */
@media (min-width: 768px) {
  .dezenas-grid {
    max-width: 420px;      /* üîπ tablets/PC m√©dio: mais largo */
  }
  .bloco-final {
    max-width: 440px;      /* üîπ acompanha largura maior */
  }
}

@media (min-width: 1200px) {
  .dezenas-grid {
    max-width: 500px;      /* üîπ desktop grande: ainda mais largo */
  }
  .bloco-final {
    max-width: 520px;      /* üîπ acompanha largura maior */
  }
}




#statusAtualizacao {
  display: block;
  width: 90%;              /* üîπ em telas pequenas ocupa quase toda a largura */
  max-width: 320px;        /* üîπ limite em telas grandes */
  margin: 10px auto;       /* üîπ centraliza horizontalmente */
  text-align: center;
  background-color: #111;
  color: #00aa00;
  padding: 6px 12px;
  border: 1px solid #00ffd5;
  border-radius: 6px;
  font-weight: bold;
}

/* Responsividade */
@media (min-width: 768px) {
  #statusAtualizacao {
    width: 60%;            /* üîπ em tablets/PCs ocupa 60% da largura */
    max-width: 400px;      /* üîπ pode ficar um pouco mais largo */
  }
}

@media (min-width: 1200px) {
  #statusAtualizacao {
    width: 40%;            /* üîπ em telas muito grandes ocupa menos espa√ßo */
    max-width: 500px;      /* üîπ limite maior para desktop */
  }
}



</style>

</head>

<body>
 <div id="splash">
    <h2>Sorteio Inteligente Lotof√°cil</h2>
    <p>Bem-vindo!</p>
  </div>

  <div id="cadastro" style="display: none;">
    <h2>Cadastro R√°pido</h2>
    <input type="text" placeholder="Nome completo" id="nome" /><br><br>
    <input type="text" placeholder="CPF" id="cpf" /><br><br>
   <p class="senha-info">
  üîí A senha deve ter no m√≠nimo 8 caracteres, come√ßando com 3 letras seguidas de n√∫meros e pelo menos uma letra mai√∫scula
</p>

	
	<input type="password" placeholder="Senha" id="senha" /><br><br>
    <button onclick="finalizarCadastro()">Continuar</button>
  </div>

  <div id="pagamento" style="display: none;">
  <h2>Pagar Pix R$ 9,80</h2>
  <button onclick="copiarPix()">üí∏ Copiar Pix</button>
  <p id="mensagemPix" style="color: green; font-weight: bold;"></p>
</div>

  

  <div id="conteudo-principal">
<h1 id="tituloPrincipal" class="neon-titulo">‚ö° SORTEIO L√ìGICO LOTOF√ÅCIL ‚ö°</h1>
	<p id="subtituloPrincipal" style="position: relative; top: -9px;">
  Sua "SORTE" com L√≥gica!!!
</p>
<h1 style="font-size: 18px; margin-top: 4px;">
  Digite manual ou pelos bot√µes at√© 20 n√∫meros de 1 a 25
</h1>
<div id="infoConcursoContainer">
    <div id="infoConcurso"></div>
  </div>



   <div id="entradaTopo">
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  <input type="text" />
  
</div>

		

    <div class="painel-botoes">
      <button onclick="importarUltimos()"class="botao-3d">üì• Importar √öltimo Concurso</button>
      <button onclick="buscarConcursoEspecifico()" class="botao-3d" >üîç Buscar Concursos</button>
      <button onclick="jogosInversosALogica()" class="botao-3d" >üß™ Jogos Inversos √† L√≥gica</button>
      <button onclick="sorteioBitcoin()"class="botao-3d">üèÜ Ganhador Estilo Bitcoin</button>
      <button onclick="avaliarConjuntoPython()"class="botao-3d">üß† Avaliar jogo</button>
    
      
      <button onclick="verTriosMaisComuns()" class="botao-3d">üìä Ver trios mais comuns</button>
      <button onclick="prepararPromissor()" class="botao-3d">üéØ Jogos Promissores</button>
      <button onclick="gerarJogosPromissores(10)" class="botao-3d">üìà Estrat√©gias Otimizadas</button>
      <button onclick="sortearComFrequencia()" class="botao-3d">üìä Probabilidade Hist√≥rica</button>
      <button id="btnSortear" class="botao-3d">üéØ Sorteio L√≥gico</button>
	  <button onclick="montarJogosLotofacil()" class="botao-3d">üìä Gerar Combina√ß√µes Lotof√°cil</button>
	  <button onclick="limparTudo()" class="botao-3d">üîÑ Apagar Todos concursos gerados</button>
	 
    </div>
	
	<script src="js/lotofacil.js"></script>
	
	<!-- Bot√£o -->
<button onclick="atualizarTodosConcursos()" class="botao-3d">
  Atualizar Concursos
</button>

<!-- √Årea de status -->
<div id="statusAtualizacao"></div>

<!-- √Årea de resultados -->
<div id="areaResultados"></div>


 
 
  üîÑ Atualizar Lotof√°cil </button>
    <div id="resultadoBitcoin" style="margin-top: 10px;"></div>
    <div id="statusImportacao"></div>
    <div id="jogosGerados"></div>
    <div id="analiseEstatistica"></div>
    <div id="listaConcursos"></div>
    <div id="ultimoConcursoTopo"></div>
    <div id="jogosInversosContainer"></div>
    <div id="jogosIneditosContainer" style="margin-top: 30px;">
      <h3 style="color: #00ff88;">üü¢ Jogos 100% In√©ditos</h3>
    </div>
    <div class="resultado" id="resultado"></div>
    <pre id="output"></pre>
  </div>
  <!-- Status da probabilidade -->
<div id="statusProbabilidade"></div>

<!-- Jogo fixo no topo -->
<div id="entradaTopo"></div>

<!-- Painel hist√≥rico lateral -->
<div id="painelHistorico"></div>


  
  </body>

  <script>
    window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("splash").style.display = "none";
               document.getElementById("cadastro").style.display = "block";
      }, 2500); // 2.5 segundos
    });

    function finalizarCadastro() {
  const nome = document.getElementById("nome").value.trim();
  const cpf = document.getElementById("cpf").value.trim();
  const senha = document.getElementById("senha").value;

  if (!nome || !cpf || !senha) {
    alert("Preencha todos os campos.");
    return;
  }

  if (!validarSenha(senha)) {
    alert("‚ö†Ô∏è Senha inv√°lida.\nEla deve ter no m√≠nimo 8 caracteres, come√ßar com 3 letras seguidas de n√∫meros e conter pelo menos uma letra mai√∫scula.");
    return;
  }

  // Exibe a √°rea de pagamento e o bot√£o Pix
  document.getElementById("cadastro").style.display = "none";
  document.getElementById("pagamento").style.display = "block";
  document.getElementById("botaoPix").style.display = "block";
}
function validarSenha(senha) {
  if (senha.length < 8) return false;

  const letrasIniciais = senha.slice(0, 3);
  if (!/^[a-zA-Z]{3}$/.test(letrasIniciais)) return false;

  const resto = senha.slice(3);
  if (!/\d/.test(resto)) return false;

  if (!/[A-Z]/.test(senha)) return false;

  return true;
}

function mostrarPix() {
  document.getElementById("pixInfo").style.display = "block";
  
  document.getElementById("pagamento").style.display = "none";
  document.getElementById("conteudo-principal").style.display = "block";
}

function copiarPix() {
  const chavePix = "19997161717";

  // Copia a chave Pix
  const tempInput = document.createElement("input");
  tempInput.value = chavePix;
  document.body.appendChild(tempInput);
  tempInput.select();
  document.execCommand("copy");
  document.body.removeChild(tempInput);

  // Mostra mensagem de sucesso
  const mensagem = document.getElementById("mensagemPix");
  mensagem.textContent = "‚úÖ Pix copiado com sucesso!";

  // Vai para a tela principal
  document.getElementById("pagamento").style.display = "none";
  document.getElementById("conteudo-principal").style.display = "block";
}



  </script>
  
  
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const cpfInput = document.getElementById("cpf");

    cpfInput.addEventListener("input", function () {
      let valor = cpfInput.value.replace(/\D/g, ""); // Remove tudo que n√£o for n√∫mero

      if (valor.length > 11) valor = valor.slice(0, 11); // Limita a 11 d√≠gitos

      // Aplica a m√°scara: 000.000.000-00
      let formatado = valor;
      if (valor.length > 9) {
        formatado = valor.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
      } else if (valor.length > 6) {
        formatado = valor.replace(/(\d{3})(\d{3})(\d{0,3})/, "$1.$2.$3");
      } else if (valor.length > 3) {
        formatado = valor.replace(/(\d{3})(\d{0,3})/, "$1.$2");
      }

      cpfInput.value = formatado;
    });
  });
</script>
  
  
</body>


<script>
// ‚úÖ Gera os 15 inputs fixos no topo ao carregar
document.addEventListener("DOMContentLoaded", () => {
  gerarInputsFixos();
});

//gera a quantidade de imputs do topo:

function gerarInputsFixos() {
  const container = document.getElementById("entradaTopo");
  container.innerHTML = "";

  for (let i = 0; i < 20; i++) {
    const input = document.createElement("input");
    input.type = "number";
    input.min = 1;
    input.max = 15;
    input.placeholder = `#${i + 1}`;
    input.id = `topo${i + 1}`;
    container.appendChild(input);
  }
}

// ‚úÖ Atualiza os n√∫meros digitados como etiquetas no topo
function atualizarTopo(numeros) {
  const labelsTopo = document.getElementById("labelsTopo");
  labelsTopo.innerHTML = "";

  numeros.forEach(num => {
    const span = document.createElement("span");
    span.className = "label";
    span.textContent = num;
    labelsTopo.appendChild(span);
  });
}

// ‚úÖ Exibe os n√∫meros sorteados na √°rea de resultado
function exibirResultado(numeros) {
  const resultadoDiv = document.getElementById("resultado");
  resultadoDiv.innerHTML = "";
  numeros.sort((a, b) => a - b).forEach(num => {
    const div = document.createElement("div");
    div.className = "label";
    div.textContent = num;
    resultadoDiv.appendChild(div);
  });
  atualizarTopo(numeros);
}

// ‚úÖ Fun√ß√£o h√≠brida: Local + Netlify, blindada para aceitar v√°rios formatos
async function sortearComFrequencia() {
  const status = document.getElementById("statusProbabilidade");
  const container = document.getElementById("jogosGerados");
  const entradaTopo = document.getElementById("entradaTopo");

  // Prompt logo no in√≠cio
  let qtdJogos = 0;
  const entrada = prompt("Digite a quantidade de jogos vari√°veis (1 a 2000):");
  if (entrada !== null) {
    const n = parseInt(entrada, 10);
    if (!isNaN(n) && n >= 1 && n <= 2000) {
      qtdJogos = n;
    } else {
      alert("Valor inv√°lido. Digite um n√∫mero entre 1 e 2000.");
      return;
    }
  }

  try {
    if (status) {
      status.innerText = "‚è≥ Analisando hist√≥rico e gerando jogos...";
      status.style.color = "#ffd700";
    }

    // üîπ Carregamento h√≠brido
    let dados = {};
    const isNetlify = window.location.hostname.includes("netlify.app") || window.location.hostname.includes("localhost:8888");

    if (isNetlify) {
      const res = await fetch("/.netlify/functions/listar_concursos");
      const { lista } = await res.json();

      for (const blob of lista.blobs) {
        const id = blob.key.replace("concurso-", "");
        const resConcurso = await fetch(`/.netlify/functions/listar_concursos?id=${id}`);
        const { dados: concursoDados } = await resConcurso.json();
        dados[id] = concursoDados;
      }
    } else {
      const response = await fetch("/SorteioApp/lotofacil_combinacoes_convertido.json", { cache: "no-store" });
      if (!response.ok) throw new Error(`HTTP ${response.status} ${response.statusText}`);
      dados = await response.json();
    }

    // üîπ Normalizador universal
    function normalizarDezenas(valor) {
      let dezenas = null;
      if (Array.isArray(valor)) dezenas = valor;
      else if (Array.isArray(valor?.dezenas)) dezenas = valor.dezenas;
      else if (typeof valor === "string") dezenas = valor.split(/[\s,;|.-]+/);
      else if (typeof valor === "number") dezenas = [valor];
      if (!Array.isArray(dezenas)) return [];
      return dezenas
        .map(v => {
          if (v === null || v === undefined) return null;
          const str = String(v).trim().replace(",", ".");
          const num = Math.round(parseFloat(str));
          if (!Number.isFinite(num)) return null;
          return (num >= 1 && num <= 25) ? num : null;
        })
        .filter(n => n !== null);
    }

    // Frequ√™ncias e pesos
    const frequencia = {};
    const pesoInercial = {};
    const entradas = Object.entries(dados);

    entradas.forEach(([concursoId, numeros]) => {
      const dezenas = normalizarDezenas(numeros);
      if (dezenas.length !== 15) {
        console.warn(`‚ö†Ô∏è Concurso ${concursoId} ignorado: formato inv√°lido`);
        return;
      }
      dezenas.forEach(num => {
        frequencia[num] = (frequencia[num] || 0) + 1;
        pesoInercial[num] = (pesoInercial[num] || 0) + parseInt(concursoId, 10);
      });
    });

    // Ranking
    const ranking = Object.entries(frequencia)
      .sort((a, b) => b[1] - a[1])
      .map(([num]) => Number(num));
    const top5 = new Set(ranking.slice(0, 5));
    const top10 = new Set(ranking.slice(5, 15));

    // Helpers
    function calcularDistanciaMedia(jogo) {
      const s = [...jogo].sort((a, b) => a - b);
      let soma = 0;
      for (let i = 1; i < s.length; i++) soma += (s[i] - s[i - 1]);
      const mediaGaps = soma / (s.length - 1);
      const dispersaoCentro = s.reduce((acc, n) => acc + Math.abs(n - 13), 0) / s.length;
      return (mediaGaps * 0.6) + (dispersaoCentro * 0.4);
    }

    function gerarJogoMesclado() {
      const universe = Array.from({ length: 25 }, (_, i) => i + 1);
      const maxFreq = Math.max(...universe.map(n => frequencia[n] || 0), 1);
      const pesos = universe.map(n => 1 + ((frequencia[n] || 0) / maxFreq) * 2);

      const escolhidos = [];
      const disponiveis = [...universe];
      const pesosAtuais = [...pesos];

      for (let k = 0; k < 15; k++) {
        const somaPesos = pesosAtuais.reduce((a, b) => a + b, 0);
        if (somaPesos <= 0) break;
        let r = Math.random() * somaPesos;
        let idx = 0;
        for (; idx < pesosAtuais.length; idx++) {
          r -= pesosAtuais[idx];
          if (r <= 0) break;
        }
        const escolhido = disponiveis[idx];
        escolhidos.push(escolhido);
        disponiveis.splice(idx, 1);
        pesosAtuais.splice(idx, 1);
      }

      while (escolhidos.length < 15) {
        const n = Math.floor(Math.random() * 25) + 1;
        if (!escolhidos.includes(n)) escolhidos.push(n);
      }
      return escolhidos.sort((a, b) => a - b);
    }

    // Jogo fixo
    const jogoFixo = Object.keys(frequencia)
      .sort((a, b) => frequencia[b] - frequencia[a])
      .slice(0, 15)
      .map(Number);

    if (entradaTopo) {
      const inputs = entradaTopo.querySelectorAll("input");
      jogoFixo.forEach((num, idx) => {
        if (inputs[idx]) {
          inputs[idx].value = num;
          inputs[idx].classList.add("input-fixo");
        }
      });
    }

    const mediaDistancia = calcularDistanciaMedia(jogoFixo);
    const scoreInercial = jogoFixo.reduce((s, n) => s + (pesoInercial[n] || 0), 0);

    const SCORE_MINIMO = 3000;
    const MIN_DIST = 2.5, MAX_DIST = 9.0;
    const MAX_TRIES = 1500;

    container.innerHTML = "";
    const jogosValidos = [];

    if (qtdJogos > 0) {
      for (let j = 0; j < qtdJogos; j++) {
        let jogo, distancia, score;
        let tries = 0;
        while (true) {
          tries++;
          jogo = gerarJogoMesclado();
          if (!Array.isArray(jogo) || jogo.length !== 15) {
            if (tries > MAX_TRIES) break;
            continue;
          }
          distancia = calcularDistanciaMedia(jogo);
          score = jogo.reduce((s, n) => s + (pesoInercial[n] || 0), 0);
          if (score >= SCORE_MINIMO || (distancia >= MIN_DIST && distancia <= MAX_DIST)) break;
          if (tries > MAX_TRIES) break;
        }
        if (!jogo || jogo.length !== 15) continue;
        jogosValidos.push({ jogo, distancia, score, tries });
      }

      jogosValidos.sort((a, b) => b.score - a.score);

      jogosValidos.forEach((item, idx) => {
        const grupo = document.createElement("div");
        grupo.className = "grupo-jogo";
        grupo.style.marginBottom = "12px";

        const titulo = document.createElement("div");
        titulo.textContent = `üîπ Jogo ${idx + 1} ‚Äî Dist√¢ncia: ${item.distancia?.toFixed(2)} | Score: ${Math.round(item.score)} (tentativas: ${item.tries})`;
        titulo.style.fontWeight = "bold";
        titulo.style.marginBottom = "6px";
        titulo.style.color = "#00ffd5";
        grupo.appendChild(titulo);

        item.jogo.forEach(num => {
          const input = document.createElement("input");
          input.type = "number";
          input.value = num;
          input.className = "input-jogo";
          input.min = 1;
          input.max = 25;

                   if (top5.has(num)) {
            input.style.backgroundColor = "#ff4500"; // vermelho forte
            input.style.color = "#fff";
            input.style.boxShadow = "0 0 6px #ff0000";
          } else if (top10.has(num)) {
            input.style.backgroundColor = "#ffa500"; // laranja
            input.style.color = "#000";
            input.style.boxShadow = "0 0 6px #ffae42";
          } else {
            input.style.backgroundColor = "#303030"; // cinza padr√£o
            input.style.color = "#ffd700"; // amarelo para destacar dezenas sorteadas
            input.style.boxShadow = "0 0 4px #00ffd5";
          }

          input.style.width = "48px";
          input.style.height = "48px";
          input.style.textAlign = "center";
          input.style.fontWeight = "bold";
          input.style.fontSize = "18px";
          input.style.borderRadius = "6px";
          input.style.border = "1px solid #3a3a3a";
          input.style.marginRight = "4px";

          grupo.appendChild(input);
        });

        container.appendChild(grupo);
      });
    }

    // üîπ Legenda fixa explicando as cores
    const legenda = document.createElement("div");
    legenda.style.marginTop = "20px";
    legenda.style.color = "#ffffff";
    legenda.style.fontWeight = "bold";
    legenda.style.fontSize = "14px";
    legenda.style.textAlign = "center";

    legenda.innerHTML = `
      <p>üî¥ Vermelho = Top 5 mais sorteados (alt√≠ssima frequ√™ncia)</p>
      <p>üüß Laranja = 6¬∫ ao 15¬∫ mais sorteados (frequ√™ncia alta)</p>
      <p>üî∂ Amarelo = Dezenas sorteadas no jogo atual (destaque visual)</p>
      <p>‚ö™ Cinza = Dezenas fora do ranking principal (equil√≠brio)</p>
    `;
    container.appendChild(legenda);

    if (status) {
      status.innerText = "‚úÖ Jogos peneirados: todos os slots foram preenchidos com jogos v√°lidos!";
      status.style.color = "#00ffd5";
    }

    console.log("üìä Jogo fixo:", jogoFixo);
    console.log("üìê Dist√¢ncia m√©dia:", mediaDistancia?.toFixed(2));
    console.log("üìà Score inercial:", Math.round(scoreInercial));

  } catch (erro) {
    console.error("‚ùå Erro na an√°lise hist√≥rica:", erro);
    if (status) {
      status.innerText = `‚ùå Falha na an√°lise hist√≥rica: ${erro.message}`;
      status.style.color = "#ff6347"; // vermelho tomate
    }
  }
}



	 
	 
	 
// Fun√ß√£o auxiliar para gerar combina√ß√µes √∫nicas de k elementos
function gerarCombinacoes(array, k) {
  const resultados = [];

  function backtrack(inicio, atual) {
    if (atual.length === k) {
      resultados.push([...atual]);
      return;
    }
    for (let i = inicio; i < array.length; i++) {
      atual.push(array[i]);
      backtrack(i + 1, atual);
      atual.pop();
    }
  }

  backtrack(0, []);
  return resultados;
}

// Fun√ß√£o principal: l√™ de 15 a 20 n√∫meros dos inputs e monta os jogos de 15 dezenas
function montarJogosLotofacil() {
  const inputsTopo = document.querySelectorAll("#entradaTopo input");
  const numerosEscolhidos = [];

  // L√™ os valores dos inputs
  inputsTopo.forEach(input => {
    const val = parseInt(input.value, 10);
    if (!isNaN(val) && val >= 1 && val <= 25) {
      numerosEscolhidos.push(val);
    }
  });

  // Verifica se foram digitados entre 15 e 20 n√∫meros v√°lidos
  if (numerosEscolhidos.length < 15 || numerosEscolhidos.length > 20) {
    alert("Voc√™ deve inserir entre 15 e 20 n√∫meros v√°lidos (entre 1 e 25).");
    return;
  }

  // Ordena os n√∫meros para consist√™ncia
  const ordenados = [...numerosEscolhidos].sort((a, b) => a - b);

  // Gera todas as combina√ß√µes poss√≠veis de 15 dezenas dentro dos escolhidos
  let jogos = gerarCombinacoes(ordenados, 15);

  // Remove duplicados (garantia extra)
  const vistos = new Set();
  jogos = jogos.filter(jogo => {
    const chave = jogo.join("-");
    if (vistos.has(chave)) return false;
    vistos.add(chave);
    return true;
  });

  // Exibe os jogos dinamicamente na p√°gina
  const container = document.getElementById("jogosGerados");
  container.innerHTML = "";

  const titulo = document.createElement("div");
  titulo.textContent = `üìä Foram gerados ${jogos.length} jogos de 15 dezenas a partir dos ${ordenados.length} escolhidos:`;
  titulo.style.fontWeight = "bold";
  titulo.style.color = "#00ffd5";
  titulo.style.marginBottom = "12px";
  container.appendChild(titulo);

  jogos.forEach((jogo, idx) => {
    const grupo = document.createElement("div");
    grupo.className = "grupo-jogo";
    grupo.style.marginBottom = "12px";

    // Exibe o jogo j√° formatado com h√≠fen (para copiar/colar)
    const tituloJogo = document.createElement("div");
    tituloJogo.textContent = `Jogo ${idx + 1}: ${jogo.map(n => String(n).padStart(2, '0')).join("-")}`;
    tituloJogo.style.fontWeight = "bold";
    tituloJogo.style.color = "#ffcc00";
    tituloJogo.style.marginBottom = "6px";
    grupo.appendChild(tituloJogo);

    container.appendChild(grupo);
  });

  // Mensagem final
  const finalMsg = document.createElement("div");
  finalMsg.textContent = "üü¢ Jogos 100% In√©ditos";
  finalMsg.style.color = "#00ff00";
  finalMsg.style.fontWeight = "bold";
  finalMsg.style.marginTop = "20px";
  container.appendChild(finalMsg);
}

	


// ‚úÖ Compat√≠vel com PC (XAMPP) e Vercel
async function jogosInversosALogica() {
  try {
    const qtd = parseInt(prompt("Quantos jogos deseja gerar? (1 a 100)", ""));
    if (isNaN(qtd) || qtd < 1 || qtd > 100) {
      alert("‚ùå Por favor, digite um n√∫mero entre 1 e 100.");
      return;
    }

    const container = document.getElementById("jogosInversosContainer");
    if (!container) {
      alert("‚ùå Container jogosInversosContainer n√£o encontrado.");
      return;
    }
    container.innerHTML = "";
    Object.assign(container.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center"
    });

    // ‚úÖ Caminho universal: funciona no Vercel e no PC
    // Se o arquivo estiver em public/lotofacil_combinacoes_convertido.json
    const urlLocal = "/lotofacil_combinacoes_convertido.json";

    const res = await fetch(urlLocal, { cache: "no-store" });
    if (!res.ok) {
      throw new Error(`HTTP ${res.status} ao carregar ${urlLocal}`);
    }
    const texto = await res.text();

    let dados;
    try {
      dados = JSON.parse(texto);
    } catch (e) {
      console.error("Resposta n√£o era JSON. Cabe√ßalho da resposta:", texto.slice(0, 300));
      throw new Error("Formato inv√°lido do JSON local");
    }

    if (!dados || (typeof dados !== "object")) {
      throw new Error("JSON local vazio ou formato n√£o reconhecido");
    }

    // üîß Normalizador universal
    function normalizarJogo(jogo) {
      const dezenasBrutas = Array.isArray(jogo)
        ? jogo
        : Array.isArray(jogo?.dezenas)
          ? jogo.dezenas
          : null;

      if (!Array.isArray(dezenasBrutas)) return [];

      const nums = dezenasBrutas
        .map(v => {
          if (v === null || v === undefined) return null;
          const str = String(v).trim().replace(",", ".");
          const num = Math.round(parseFloat(str));
          if (!Number.isFinite(num)) return null;
          return (num >= 1 && num <= 25) ? num : null;
        })
        .filter(n => n !== null);

      return Array.from(new Set(nums)).sort((a, b) => a - b);
    }

    const jogosNormalizados = Object.values(dados)
      .map(normalizarJogo)
      .filter(arr => arr.length >= 1);

    if (!jogosNormalizados.length) {
      throw new Error("Nenhum jogo v√°lido encontrado no JSON local");
    }

    const jogosSalvos = jogosNormalizados
      .filter(arr => arr.length === 15)
      .map(arr => arr.join(","));

    const contagem = {};
    for (let i = 1; i <= 25; i++) contagem[i] = 0;
    jogosNormalizados.forEach(dezenas => {
      dezenas.forEach(num => { contagem[num] = (contagem[num] || 0) + 1; });
    });

    const topFrequentes = Object.entries(contagem)
      .sort((a, b) => b[1] - a[1])
      .map(([num]) => parseInt(num, 10));

    const top5 = topFrequentes.slice(0, 5);
    const top10 = topFrequentes.slice(5, 10);

    const criarSpan = dezena => {
      const span = document.createElement("span");
      span.textContent = String(dezena).padStart(2, "0");
      Object.assign(span.style, {
        fontWeight: "bold",
        textAlign: "center",
        width: "48px",
        height: "48px",
        lineHeight: "48px",
        fontSize: "18px",
        borderRadius: "6px",
        display: "inline-block",
        boxShadow: "0 0 4px #888",
        marginRight: "4px",
        backgroundColor: top5.includes(dezena)
          ? "#ff4d4d"
          : top10.includes(dezena)
          ? "#ffa500"
          : "#333",
        color: "#fff"
      });
      return span;
    };

    // üîß Gera√ß√£o dos jogos
    for (let j = 0; j < qtd; j++) {
      const titulo = document.createElement("div");
      titulo.textContent = `üéØ Jogo ${j + 1}:`;
      Object.assign(titulo.style, {
        color: "#00ffd5",
        fontWeight: "bold",
        margin: "12px 0 6px",
        fontSize: "16px"
      });
      container.appendChild(titulo);

      const jogo = [];

      const inicio = Math.floor(Math.random() * 16) + 1;
      for (let i = 0; i < 5; i++) {
        const n = inicio + i;
        if (n <= 25 && !jogo.includes(n)) jogo.push(n);
      }

      [1, 25].forEach(n => { if (!jogo.includes(n)) jogo.push(n); });

      let candidato = 1;
      while (jogo.length < 13) {
        if (candidato % 2 !== 0 && !jogo.includes(candidato)) jogo.push(candidato);
        candidato++;
      }

      const raras = [11, 18, 22, 13, 2];
      raras.forEach(r => { if (jogo.length < 15 && !jogo.includes(r)) jogo.push(r); });

      const final = jogo.slice(0, 15).sort((a, b) => a - b);
      const jogoString = final.join(",");
      const existeNoJson = jogosSalvos.includes(jogoString);

      const linha = document.createElement("div");
      Object.assign(linha.style, {
        display: "flex",
        flexWrap: "wrap",
        gap: "6px",
        marginBottom: "10px",
        justifyContent: "center"
      });

      final.forEach(dezena => linha.appendChild(criarSpan(dezena)));
      container.appendChild(linha);

      const status = document.createElement("div");
      status.innerHTML = existeNoJson
        ? "<span style='color:green;'>‚úÖ J√° existe no hist√≥rico</span>"
        : "<span style='color:red;'>üÜï In√©dito</span>";
      status.style.marginBottom = "6px";
      container.appendChild(status);
    }

    const legenda = document.createElement("div");
    legenda.style.fontSize = "13px";
    legenda.style.marginTop = "20px";
    legenda.innerHTML = `
      <strong>üé® Legenda de cores:</strong><br>
      üî¥ <span style="color:red; font-weight:bold;">Vermelho</span>: n√∫meros mais frequentemente sorteados (top 5)<br>
      üü† <span style="color:orange; font-weight:bold;">Laranja</span>: n√∫meros medianamente sorteados (top 6‚Äì10)<br>
      ‚ö´Ô∏è <span style="color:#333; font-weight:bold;">Preto</span>: n√∫meros menos sorteados (fora do top 10)
    `;
    container.appendChild(legenda);

    atualizarStatus(`‚úÖ ${qtd} jogo(s) gerado(s) com destaque por frequ√™ncia!`, "#00ffd5");
  } catch (error) {
    console.error("Erro ao carregar ou processar os dados:", error);
    alert("‚ùå Falha ao gerar os jogos. Verifique o caminho do JSON local ou o formato dos dados.");
  }
}

function gerarJogoPromissor(historicoConcursos) {
  const frequencia = {};
  const triosRepetidos = new Set();
  const dezenasRecentes = new Set();

  // üîÅ Calcula frequ√™ncia de cada dezena
  Object.values(historicoConcursos).forEach(dezenas => {
    dezenas.forEach(n => {
      frequencia[n] = (frequencia[n] || 0) + 1;
    });

    // üîó Extrai trios recorrentes
    for (let i = 0; i < dezenas.length - 2; i++) {
      const trio = [dezenas[i], dezenas[i + 1], dezenas[i + 2]].sort((a, b) => a - b).join("-");
      triosRepetidos.add(trio);
    }
  });

  // üîç Define dezenas frias (menos frequentes)
  const todasDezenas = Array.from({ length: 25 }, (_, i) => i + 1);
  const frias = todasDezenas
    .filter(n => !frequencia[n] || frequencia[n] < 5); // ajuste o limiar conforme necess√°rio

  // üß† Define dezenas quentes (mais frequentes)
  const quentes = todasDezenas
    .filter(n => frequencia[n] >= 10) // ajuste o limiar conforme necess√°rio
    .sort((a, b) => frequencia[b] - frequencia[a]);

  // üìä Distribui√ß√£o por faixa
  const faixaBaixa = todasDezenas.filter(n => n >= 1 && n <= 8 && !frias.includes(n));
  const faixaMedia = todasDezenas.filter(n => n >= 9 && n <= 17 && !frias.includes(n));
  const faixaAlta = todasDezenas.filter(n => n >= 18 && n <= 25 && !frias.includes(n));

  // üî¢ Seleciona 5 de cada faixa
  const jogo = [];

  function sortearDezenas(faixa, qtd) {
    const selecionadas = [];
    const candidatos = faixa.slice();
    while (selecionadas.length < qtd && candidatos.length > 0) {
      const idx = Math.floor(Math.random() * candidatos.length);
      selecionadas.push(candidatos.splice(idx, 1)[0]);
    }
    return selecionadas;
  }

  jogo.push(...sortearDezenas(faixaBaixa, 5));
  jogo.push(...sortearDezenas(faixaMedia, 5));
  jogo.push(...sortearDezenas(faixaAlta, 5));

  // üîó Tenta incluir um trio recorrente
  const trioArray = Array.from(triosRepetidos);
  if (trioArray.length > 0) {
    const trio = trioArray[Math.floor(Math.random() * trioArray.length)]
      .split("-")
      .map(n => parseInt(n, 10));

    trio.forEach(n => {
      if (!jogo.includes(n) && jogo.length < 15) jogo.push(n);
    });
  }

  // üîÅ Completa at√© 15 dezenas se necess√°rio
  while (jogo.length < 15) {
    const candidatos = quentes.filter(n => !jogo.includes(n));
    const n = candidatos[Math.floor(Math.random() * candidatos.length)];
    if (n) jogo.push(n);
  }

  return jogo.slice(0, 15).sort((a, b) => a - b);
}

async function verTriosMaisComuns() {
  const resultado = document.getElementById("areaResultados");
  if (!resultado) return;

  // üîπ Pergunta ao usu√°rio qual tamanho de combina√ß√£o deseja
  let tamanho = parseInt(prompt("Digite o tamanho da combina√ß√£o:\n2 = Duplas\n3 = Trios\n4 = Quadras\n5 = Quinas"));
  if (![2,3,4,5].includes(tamanho)) {
    atualizarStatus("‚ö†Ô∏è Valor inv√°lido. Digite 2, 3, 4 ou 5.", "#ff6347");
    return;
  }

  atualizarStatus(`üîç Calculando combina√ß√µes de ${tamanho} n√∫meros mais comuns...`, "#4682b4");
  resultado.innerHTML = "";

  try {
    // Carrega o JSON completo
    const res = await fetch("/SorteioApp/lotofacil_combinacoes_convertido.json", { cache: "no-store" });
    if (!res.ok) throw new Error(`HTTP ${res.status} ao carregar JSON`);
    const data = await res.json();

    // üîπ Extrai apenas concursos (chaves num√©ricas)
    const concursos = Object.keys(data)
      .filter(k => !isNaN(parseInt(k)))
      .map(k => data[k]);

    // üîπ Conta combina√ß√µes
    const contador = new Map();

    concursos.forEach(dezenas => {
      gerarCombinacoes(dezenas, tamanho).forEach(comb => {
        const chave = comb.sort((a, b) => a - b).join("-");
        contador.set(chave, (contador.get(chave) || 0) + 1);
      });
    });

    // üîπ Ordena por frequ√™ncia
    const combinacoesOrdenadas = [...contador.entries()]
      .map(([comb, ocorrencias]) => ({ comb: comb.split("-"), ocorrencias }))
      .sort((a, b) => b.ocorrencias - a.ocorrencias)
      .slice(0, 30);

    // üîπ Renderiza resultado
    let html = `<strong>üìä Top ${tamanho}-pletos mais comuns (${concursos.length} concursos analisados):</strong><br><ul style="list-style:none; padding-left:0;">`;
    combinacoesOrdenadas.forEach((item, idx) => {
      html += `<li>üî¢ <strong>${item.comb.join(" - ")}</strong> ‚Äî ${item.ocorrencias}x</li>`;
      if ((idx + 1) % 3 === 0) html += `<hr>`;
    });
    html += `</ul>`;
    resultado.innerHTML = html;

    atualizarStatus(`‚úÖ ${tamanho}-pletos calculados com sucesso!`, "#00ffd5");
  } catch (err) {
    console.error("‚ùå Erro ao calcular combina√ß√µes:", err);
    atualizarStatus("‚ùå Falha ao processar JSON.", "#ff6347");
    resultado.innerHTML = `<p style="color: red;">‚ö†Ô∏è N√£o foi poss√≠vel calcular.</p>`;
  }
}

// üîπ Fun√ß√£o auxiliar para gerar combina√ß√µes de tamanho N
function gerarCombinacoes(array, tamanho) {
  const resultado = [];
  function backtrack(inicio, atual) {
    if (atual.length === tamanho) {
      resultado.push([...atual]);
      return;
    }
    for (let i = inicio; i < array.length; i++) {
      atual.push(array[i]);
      backtrack(i + 1, atual);
      atual.pop();
    }
  }
  backtrack(0, []);
  return resultado;
}

function atualizarStatus(msg, cor) {
  const status = document.getElementById("statusAtualizacao");
  if (status) {
    status.textContent = msg;
    status.style.color = cor;
    status.style.fontWeight = "bold";
  }
}


function limparTudo() {
  document.getElementById("infoConcurso").textContent = "";

  const inputsNumericos = document.querySelectorAll('input[type="number"]');
  inputsNumericos.forEach(input => {
    input.value = "";
    input.style.backgroundColor = "";
    input.style.color = "";
    input.style.fontWeight = "";
    input.style.fontFamily = "";
    input.classList.remove("highlight", "error");
  });

  const inputsTexto = document.querySelectorAll('#entrada input[type="text"]');
  inputsTexto.forEach(input => {
    input.value = "";
    input.style.backgroundColor = "";
    input.style.color = "";
    input.style.fontWeight = "";
    input.style.fontFamily = "";
    input.classList.remove("highlight", "error");
  });

  // ‚úÖ Agora tamb√©m limpa os inputs fixos do topo
  const inputsTopo = document.querySelectorAll('#entradaTopo input');
  inputsTopo.forEach(input => {
    input.value = "";
    input.style.backgroundColor = "";
    input.style.color = "";
    input.style.fontWeight = "";
    input.style.fontFamily = "";
  });

  const labelsTopo = document.getElementById("labelsTopo");
  if (labelsTopo) labelsTopo.innerHTML = "";

  const resultado = document.getElementById("resultado");
  if (resultado) resultado.innerHTML = "";

  const output = document.getElementById("output");
  if (output) output.textContent = "";

  atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");

  const resultadoBitcoin = document.getElementById("resultadoBitcoin");
  if (resultadoBitcoin) resultadoBitcoin.innerHTML = "";

  const topo = document.getElementById("ultimoConcursoTopo");
  if (topo) topo.innerHTML = "";

  window.jogoFixo = [];
  window.maisFrequentes = [];
  window.previstosEconometricamente = [];

  const container = document.getElementById("jogosGerados");
  if (container) container.innerHTML = "";

  const analise = document.getElementById("analiseEstatistica");
  if (analise) analise.innerHTML = "";

  const lista = document.getElementById("listaConcursos");
  if (lista) lista.innerHTML = "";

  const barra = document.getElementById("barraProgresso");
  if (barra) {
    barra.style.transition = "width 0.3s ease";
    barra.style.width = "0%";
  }

  const painelConcursos = document.getElementById("painelConcursos");
  if (painelConcursos) painelConcursos.innerHTML = "";

  localStorage.removeItem("ultimosConcursos");

  const tabela = document.querySelector("#tabelaConcursos tbody");
  if (tabela) tabela.innerHTML = "";

  const alertas = document.getElementById("alertas");
  if (alertas) alertas.innerHTML = "";

  const jogosInversos = document.getElementById("jogosInversosContainer");
  if (jogosInversos) jogosInversos.innerHTML = "";

  // ‚úÖ Agora tamb√©m limpa os resultados extras do promissor
  const extras = document.getElementById("resultadoExtras");
  if (extras) extras.innerHTML = "";

  // ‚úÖ Agora tamb√©m limpa os resultados da fun√ß√£o de trios/combinacoes
  const areaResultados = document.getElementById("areaResultados");
  if (areaResultados) areaResultados.innerHTML = "";
}

function atualizarTopo(dezenas) {
  const inputs = document.querySelectorAll('#entradaTopo input');
  dezenas.forEach((n, i) => {
    if (inputs[i]) {
      inputs[i].value = String(n).padStart(2, '0');
      inputs[i].style = `
        background-color: #f0f8ff;
        font-weight: bold;
        font-family: 'Orbitron', Arial, sans-serif;
        color: #000;
        text-align: center;
      `;
    }
  });
}
 
 
 
 
 function avaliarConjuntoPython() {
  const inputs = document.querySelectorAll('#entradaTopo input');
  const numeros = [];

  // Captura e valida os n√∫meros
  inputs.forEach(input => {
    let valor = parseInt(input.value);
    if (isNaN(valor)) {
      const limpo = input.value.replace(/\D/g, '');
      valor = parseInt(limpo);
    }
    numeros.push(Number.isInteger(valor) && valor >= 1 && valor <= 25 ? valor : null);
  });

  const conjuntoCorrigido = numeros.filter(n => n !== null);

  // Verifica se tem 15 n√∫meros v√°lidos
  if (conjuntoCorrigido.length !== 15) {
    atualizarStatus(`‚ö†Ô∏è Conjunto inv√°lido: ${conjuntoCorrigido.length}/15 n√∫meros v√°lidos.`, "#ff9900");
    return;
  }

  // Verifica duplicados
  const conjuntoUnico = [...new Set(conjuntoCorrigido)];
  if (conjuntoUnico.length !== 15) {
    atualizarStatus("‚ö†Ô∏è Conjunto inv√°lido: n√∫meros repetidos detectados.", "#ff9900");
    return;
  }

  atualizarTopo(conjuntoUnico);

  // Estat√≠sticas
  const soma_total = conjuntoUnico.reduce((a, b) => a + b, 0);
  const pares = conjuntoUnico.filter(n => n % 2 === 0).length;
  const impares = 15 - pares;

  // Distribui√ß√£o por linhas e colunas
  const distribuicao = {
    linhas: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 },
    colunas: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 }
  };
  conjuntoUnico.forEach(n => {
    const linha = Math.floor((n - 1) / 5) + 1;
    const coluna = ((n - 1) % 5) + 1;
    distribuicao.linhas[linha]++;
    distribuicao.colunas[coluna]++;
  });

  // Detecta trios consecutivos
  const sequencias_comuns = [];
  const ordenado = [...conjuntoUnico].sort((a, b) => a - b);
  for (let i = 0; i < ordenado.length - 2; i++) {
    if (ordenado[i + 1] === ordenado[i] + 1 && ordenado[i + 2] === ordenado[i] + 2) {
      sequencias_comuns.push([ordenado[i], ordenado[i + 1], ordenado[i + 2]]);
    }
  }

  // Fun√ß√µes auxiliares para gerar varia√ß√µes
  function variarVizinho(base) {
  let jogo = base.map(n => {
    if (Math.random() < 0.4) {
      let novo = n + (Math.random() < 0.5 ? -1 : 1);
      if (novo < 1) novo = 1;
      if (novo > 25) novo = 25;
      return novo;
    }
    return n;
  });

  // Remove duplicados
  jogo = [...new Set(jogo)];

  // Completa at√© 15 n√∫meros √∫nicos
  while (jogo.length < 15) {
    let novo = Math.floor(Math.random() * 25) + 1;
    if (!jogo.includes(novo)) jogo.push(novo);
  }

  return jogo.sort((a, b) => a - b);
}

function preservarSequencias(base) {
  let jogo = [...base];
  sequencias_comuns.forEach(seq => {
    seq.forEach(n => {
      if (!jogo.includes(n)) jogo.push(n);
    });
  });

  // Substitui alguns n√∫meros fora das sequ√™ncias
  for (let i = 0; i < 3; i++) {
    const idx = Math.floor(Math.random() * jogo.length);
    let novo = Math.floor(Math.random() * 25) + 1;
    if (!jogo.includes(novo)) jogo[idx] = novo;
  }

  // Remove duplicados e completa
  jogo = [...new Set(jogo)];
  while (jogo.length < 15) {
    let novo = Math.floor(Math.random() * 25) + 1;
    if (!jogo.includes(novo)) jogo.push(novo);
  }

  return jogo.sort((a, b) => a - b);
}

function equilibrarDistribuicao(base) {
  let jogo = [...base];
  const paresAtual = jogo.filter(n => n % 2 === 0).length;

  if (paresAtual < 7) {
    for (let i = 0; i < 2; i++) {
      const idx = jogo.findIndex(n => n % 2 !== 0);
      if (idx !== -1) jogo[idx] = 2 + Math.floor(Math.random() * 12) * 2;
    }
  } else if (paresAtual > 9) {
    for (let i = 0; i < 2; i++) {
      const idx = jogo.findIndex(n => n % 2 === 0);
      if (idx !== -1) jogo[idx] = 1 + Math.floor(Math.random() * 12) * 2;
    }
  }

  // Remove duplicados e completa
  jogo = [...new Set(jogo)];
  while (jogo.length < 15) {
    let novo = Math.floor(Math.random() * 25) + 1;
    if (!jogo.includes(novo)) jogo.push(novo);
  }

  return jogo.sort((a, b) => a - b);
}




  // Gera at√© 9 jogos sugestivos
  const sugestoes = [];
  for (let i = 0; i < 3; i++) {
    sugestoes.push(variarVizinho(conjuntoUnico).sort((a, b) => a - b));
  }
  for (let i = 0; i < 3; i++) {
    sugestoes.push(preservarSequencias(conjuntoUnico).sort((a, b) => a - b));
  }
  for (let i = 0; i < 3; i++) {
    sugestoes.push(equilibrarDistribuicao(conjuntoUnico).sort((a, b) => a - b));
  }

  // Monta resultado
  const resultado = document.getElementById("resultadoBitcoin");
  let html = `
    <strong>üìä Avalia√ß√£o JavaScript:</strong><br>
    <ul style="list-style:none; padding-left:0;">
      <li>üßÆ Soma total: <strong>${soma_total}</strong></li>
      <li>‚öñÔ∏è Pares: <strong>${pares}</strong> | √çmpares: <strong>${impares}</strong></li>
      <li>üîç Trios comuns detectados: <strong>${sequencias_comuns.length}</strong></li>
  `;

  if (sequencias_comuns.length) {
    html += `<li>üîó Trios encontrados: <strong>${sequencias_comuns.map(t => t.join("-")).join(", ")}</strong></li>`;
  }

  html += `</ul>`;

  const linhas = Object.entries(distribuicao.linhas).map(([l, q]) => `L${l}: ${q}`).join(" | ");
  const colunas = Object.entries(distribuicao.colunas).map(([c, q]) => `C${c}: ${q}`).join(" | ");
  html += `<p>üß© Distribui√ß√£o:<br><strong>${linhas}</strong><br><strong>${colunas}</strong></p>`;

  // Exibe sugest√µes de jogos com estilo neon
  if (sugestoes.length) {
    html += `<p style="margin-top:20px; color:#ffcc00; font-weight:bold;">üé∞ Sugest√µes de jogos:</p><ul style="list-style:none; padding-left:0;">`;
    sugestoes.forEach((jogo, i) => {
      html += `
        <li style="
          margin-top:20px;
          font-size:18px;
          font-family:'Orbitron', sans-serif;
          color:#ffffff;
          text-shadow:0 0 8px #00ffd5, 0 0 12px #00ffd5;
        ">
          <strong style="color:#ff00ff; text-shadow:0 0 6px #ff00ff;">Jogo ${i + 1}:</strong><br>
          <span style="color:#00ffd5; font-weight:bold; text-shadow:0 0 10px #00ffd5;">
            ${jogo.join(" ... ")}
          </span>
        </li>
      `;
    });
    html += `</ul>`;
  }

  resultado.innerHTML = html;
  atualizarStatus("‚úÖ Avalia√ß√£o conclu√≠da com sucesso!", "#00ffd5");
}



  // ‚úÖ Limpa toda a interface visual e dados
  function limparInterfaceCompleta() {
    const campos = [
      "resultadoBitcoin", "jogosGerados", "analiseEstatistica",
      "statusImportacao", "labelsTopo", "ultimoConcursoTopo", "infoUltimoConcurso",
      "tabelaTrios", "listaConcursos", "resultado", "output"
    ];
    campos.forEach(id => {
      const el = document.getElementById(id);
      if (el) el.innerHTML = "";
    });

    const concursoInput = document.getElementById("numeroConcurso");
    if (concursoInput) concursoInput.value = "";

    document.querySelectorAll("input").forEach(input => {
      input.value = "";
      input.style.backgroundColor = "";
      input.style.color = "";
      input.style.fontWeight = "";
      input.style.fontFamily = "";
    });

    window.jogoFixo = [];
    atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");
  }
  
  // üßπ Limpa somente os jogos promissores extras (n√£o altera os inputs do topo)
function limparJogosPromissores() {
  const resultadoExtras = document.getElementById("resultadoExtras");
  if (resultadoExtras) {
    resultadoExtras.innerHTML = ""; // apaga apenas os cards gerados dinamicamente
  }

  // Mant√©m os inputs fixos do topo intactos
  // N√£o mexe em window.jogoFixo nem nos valores j√° preenchidos

  if (typeof atualizarStatus === "function") {
    atualizarStatus("üßπ Jogos promissores apagados com sucesso!", "#00ffd5");
  }
}  
  
  
  
document.addEventListener("DOMContentLoaded", () => {
  const botao = document.getElementById("btnSortear");
  if (botao) {
    botao.addEventListener("click", sortearComLogica);
  }
});

async function sortearComLogica() {
  atualizarStatus("‚è≥ Aguarde: Analisando todos os concursos e gerando sugest√µes equilibradas...", "#ff00ff");

  try {
    // üîπ L√™ o JSON local
    const url = `${window.location.origin}/SorteioApp/lotofacil_combinacoes_convertido.json`;
    const res = await fetch(url, { cache: "no-store" });
    if (!res.ok) throw new Error(`Erro HTTP ${res.status} ao ler ${url}`);
    const dados = await res.json();

    // Normaliza√ß√£o
    function normalizarDezenas(valor) {
      if (Array.isArray(valor)) return valor;
      if (Array.isArray(valor?.dezenas)) return valor.dezenas;
      if (typeof valor === "string") return valor.split(/[\s,;|.-]+/).map(Number);
      if (typeof valor === "number") return [valor];
      return [];
    }

    const jogosOrdenados = Object.entries(dados)
      .map(([chave, dezenas]) => [parseInt(chave), normalizarDezenas(dezenas)])
      .filter(([_, dezenas]) => dezenas.length === 15)
      .sort((a, b) => a[0] - b[0]);

    if (!jogosOrdenados.length) {
      atualizarStatus("‚ùå Nenhum jogo encontrado no hist√≥rico.", "#ff0000");
      return;
    }

    // √öltimo concurso
    const ultimoConcurso = jogosOrdenados[jogosOrdenados.length - 1];
    const dezenasUltimoSet = new Set(ultimoConcurso[1]);

    const container = document.getElementById("jogosGerados");
    container.innerHTML = "";

    // Estat√≠sticas
    const estatisticas = {};
    for (let i = 1; i <= 25; i++) {
      estatisticas[i] = { freq: 0, freqRecente: 0, atraso: 0 };
    }

    const totalJogos = jogosOrdenados.length;
    jogosOrdenados.forEach(([_, jogo], index) => {
      jogo.forEach(num => {
        estatisticas[num].freq++;
        estatisticas[num].atraso = totalJogos - index;
      });
    });

    const qtdMostrar = parseInt(prompt("Quantos jogos deseja visualizar?")) || 30;
    const intervaloRecente = parseInt(prompt("Quantos concursos recentes considerar para os n√∫meros amarelos?")) || 50;

    let recentes = intervaloRecente === 1 ? [ultimoConcurso] : jogosOrdenados.slice(-intervaloRecente);
    recentes.forEach(([_, dezenas]) => dezenas.forEach(num => estatisticas[num].freqRecente++));

    // Ranking geral
    const ranking = Object.entries(estatisticas)
      .sort((a, b) => b[1].freq - a[1].freq)
      .map(([num]) => Number(num));
    const top5 = new Set(ranking.slice(0, 5));
    const top10 = new Set(ranking.slice(5, 15));

    // Ranking dos mais frequentes nos √∫ltimos X concursos
    const rankingRecentes = Object.entries(estatisticas)
      .sort((a, b) => b[1].freqRecente - a[1].freqRecente)
      .map(([num]) => Number(num));
    const topRecentes = new Set(rankingRecentes.slice(0, 15)); // üîπ agora top 15 ficam amarelos

    // Fun√ß√£o de score
    function calcularScore(jogo) {
      let score = 0, soma = 0, pares = 0, impares = 0;
      const quadrantes = [0,0,0,0];
      let seq = 1, seqMax = 1;
      const ordenado = [...jogo].sort((a,b)=>a-b);

      for (let i=0; i<ordenado.length; i++) {
        const n = ordenado[i];
        const e = estatisticas[n];
        soma += n;
        if (n % 2 === 0) pares++; else impares++;
        if (n <= 6) quadrantes[0]++; else if (n <= 12) quadrantes[1]++;
        else if (n <= 18) quadrantes[2]++; else quadrantes[3]++;

        if (i>0 && ordenado[i] === ordenado[i-1]+1) {
          seq++;
          seqMax = Math.max(seqMax, seq);
        } else seq = 1;

        score += (e.freq * 1.2) + (e.freqRecente * 2) - (e.atraso * 0.5);
      }

      if (soma >= 185 && soma <= 205) score += 5; else score -= 3;
      if (Math.abs(pares - impares) <= 2) score += 4; else score -= 2;
      if (quadrantes.filter(q => q >= 2).length >= 3) score += 3; else score -= 2;
      if (seqMax >= 4) score -= 4; else score += 2;

      return score;
    }

    // Simula√ß√£o
    const simulados = [];
    const maxFreq = Math.max(...Object.values(estatisticas).map(e => e.freq));
    for (let s = 0; s < 2000; s++) {
      const jogoSimulado = [];
      while (jogoSimulado.length < 15) {
        const universe = Array.from({ length: 25 }, (_, i) => i + 1);
        const pesos = universe.map(n => {
          let base = 1 + ((estatisticas[n].freq / maxFreq) * 3);
          if (top5.has(n)) base *= 2.5;
          else if (top10.has(n)) base *= 1.5;
          return base;
        });
        const somaPesos = pesos.reduce((a, b) => a + b, 0);
        let r = Math.random() * somaPesos;
        let idx = 0;
        for (; idx < pesos.length; idx++) {
          r -= pesos[idx];
          if (r <= 0) break;
        }
        const escolhido = universe[idx];
        if (!jogoSimulado.includes(escolhido)) jogoSimulado.push(escolhido);
      }
      simulados.push({ jogo: jogoSimulado, score: calcularScore(jogoSimulado) });
    }

    const topSimulados = simulados.sort((a, b) => b.score - a.score).slice(0, qtdMostrar);

    // Legenda
    const legenda = document.createElement("div");
    legenda.style.color = "#fff";
    legenda.style.fontWeight = "bold";
    legenda.style.textAlign = "center";
    legenda.innerHTML = `
      <p>üî¥ Vermelho = Top 5 mais sorteados</p>
      <p>üüß Laranja = 6¬∫ ao 15¬∫ mais sorteados</p>
      <p>üî∂ Amarelo = Top 15 mais frequentes nos √∫ltimos ${intervaloRecente} concursos</p>
      <p>‚ö™ Cinza = Dezenas fora do ranking principal</p>
    `;
    container.appendChild(legenda);

    // Renderiza√ß√£o
    topSimulados.forEach((item, i) => {
      const grupo = document.createElement("div");
      grupo.style.marginBottom = "12px";
      const titulo = document.createElement("div");
      titulo.textContent = `üîÆ Sugest√£o ${i+1} ‚Äî Score: ${item.score.toFixed(2)}`;
      titulo.style.color = "#fff";
      titulo.style.fontWeight = "bold";
      grupo.appendChild(titulo);

      item.jogo.sort((a,b)=>a-b).forEach(num => {
        const span = document.createElement("span");
        span.textContent = String(num).padStart(2,'0');
        span.style.display = "inline-block";
        span.style.width = "48px";
        span.style.height = "48px";
        span.style.lineHeight = "48px";
        span.style.textAlign = "center";
        span.style.fontWeight = "bold";
        span.style.fontSize = "18px";
        span.style.borderRadius = "6px";
        span.style.marginRight = "4px";

        const ehUltimo = intervaloRecente === 1 && dezenasUltimoSet.has(num);
        const ehRecente = intervaloRecente > 1 && topRecentes.has(num);

                if (ehUltimo || ehRecente) {
          span.style.backgroundColor = "#ffd700"; // amarelo
          span.style.color = "#000";
          span.style.boxShadow = "0 0 6px rgba(255,215,0,0.9)";
        } else if (top5.has(num)) {
          span.style.backgroundColor = "#ff4500"; // vermelho
          span.style.color = "#fff";
          span.style.boxShadow = "0 0 6px #ff0000";
        } else if (top10.has(num)) {
          span.style.backgroundColor = "#ffa500"; // laranja
          span.style.color = "#000";
          span.style.boxShadow = "0 0 6px #ffae42";
        } else {
          span.style.backgroundColor = "#202020"; // cinza
          span.style.color = "#ccc";
          span.style.boxShadow = "0 0 4px rgba(200,200,200,0.6)";
        }

        grupo.appendChild(span);
      });

      container.appendChild(grupo);
    });

    atualizarStatus(
      `‚úÖ Foram gerados ${simulados.length} jogos simulados. Exibindo ${qtdMostrar} melhores sugest√µes.`,
      "#00bfff"
    );

  } catch (erro) {
    console.error("‚ùå Erro ao acessar o hist√≥rico:", erro);
    atualizarStatus("‚ùå Falha ao acessar os concursos. Verifique se o formato est√° correto.", "#ff6347");
  }
}

// üîπ Expor no escopo global para funcionar com onclick no HTML
window.sortearComLogica = sortearComLogica;
	  
</script>

   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

	
	
<script>
  async function gerarBloco() {
  for (let i = 0; i < JOGOS_POR_BLOCO; i++) {
    const jogo = gerarJogoAleatorio();
    const acertos = jogo.filter(n => window.jogoFixo.includes(n)).length;
    const frequentesNoJogo = jogo.filter(n => window.maisFrequentes.includes(n)).length;
    const previstosNoJogo = jogo.filter(n => window.previstosEconometricamente.includes(n)).length;

    const progressoTotal = blocoAtual * JOGOS_POR_BLOCO + i;
    const progressoPercentual = (progressoTotal / TOTAL_JOGOS) * 100;
    atualizarBarra(progressoPercentual);

    if (acertos >= 12 || (frequentesNoJogo >= 8 && previstosNoJogo >= 6)) {
      const div = document.createElement("div");
      div.className = "jogo-comparativo";

      const grupo = document.createElement("div");
      grupo.style.display = "flex";
      grupo.style.flexWrap = "wrap";
      grupo.style.gap = "4px";

      jogo.forEach(num => {
        const el = document.createElement("div");
        el.className = "label";
        el.textContent = num;
        if (window.jogoFixo.includes(num)) {
          el.classList.add("sorteado");
        }
        grupo.appendChild(el);
      });

      const status = await verificarRepeticaoHistorica(jogo);
      const contador = document.createElement("div");
      const origem = acertos >= 12 ? "üéØ por acertos" : "üìà por tend√™ncia";
      contador.textContent = `Acertos: ${acertos} ${origem} ${status}`;
      contador.style.marginTop = "8px";
      contador.style.fontWeight = "bold";
      div.appendChild(grupo);
      div.appendChild(contador);

      if (status.includes("üü¢")) {
        document.getElementById("jogosIneditosContainer").appendChild(div);
      } else {
        document.getElementById("jogosGerados").appendChild(div);
      }

      jogosComAcertos++;
    }
  }

  blocoAtual++;

  if (blocoAtual < BLOCOS) {
    setTimeout(() => gerarBloco(), 50);
  } else {
    pararCronometro();
    finalizarBarra();

    atualizarStatus(
      jogosComAcertos === 0
        ? "üîÅ Nenhum jogo relevante encontrado."
        : `üìä Foram encontrados ${jogosComAcertos} jogos com alto potencial!`,
      jogosComAcertos === 0 ? "#ff4500" : "#228B22"
    );
  }
}

  function sortearAleatorios(array, quantidade) {
    const embaralhado = [...array];
    for (let i = embaralhado.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [embaralhado[i], embaralhado[j]] = [embaralhado[j], embaralhado[i]];
    }
    return embaralhado.slice(0, quantidade);
  }

  function carregarCombinacoesReais() {
    atualizarStatus("‚ö†Ô∏è Fun√ß√£o 'carregarCombinacoesReais' ainda n√£o implementada.", "#ff9900");
  }

// ‚úÖ Fun√ß√£o h√≠brida: Local + Netlify, blindada para aceitar v√°rios formatos
async function prepararPromissor() {
  if (window._promissorBusy) {
    atualizarStatus("‚è≥ Aguarde: gera√ß√£o em andamento.", "#ffcc00");
    return;
  }
  window._promissorBusy = true;

  try {
    // üîπ Carregamento h√≠brido
    let concursos = {};
    const isNetlify = window.location.hostname.includes("netlify.app") || window.location.hostname.includes("localhost:8888");

    if (isNetlify) {
      // ‚úÖ Ambiente Netlify ‚Üí usa endpoint real das Functions
      const res = await fetch("/.netlify/functions/listar_concursos");
      const { lista } = await res.json();

      for (const blob of lista.blobs) {
        const id = blob.key.replace("concurso-", "");
        const resConcurso = await fetch(`/.netlify/functions/listar_concursos?id=${id}`);
        const { dados } = await resConcurso.json();
        concursos[id] = dados;
      }
    } else {
      // ‚úÖ Ambiente local ou est√°tico ‚Üí JSON publicado junto com o site
      const response = await fetch("/SorteioApp/lotofacil_combinacoes_convertido.json", { cache: "no-store" });
      if (!response.ok) throw new Error(`HTTP ${response.status} ${response.statusText}`);
      concursos = await response.json();
    }

    // üîπ Normalizador universal para dezenas
    function normalizarDezenas(valor) {
      let dezenas = null;

      if (Array.isArray(valor)) {
        dezenas = valor;
      } else if (Array.isArray(valor?.dezenas)) {
        dezenas = valor.dezenas;
      } else if (typeof valor === "string") {
        dezenas = valor.split(/[\s,;|.-]+/);
      } else if (typeof valor === "number") {
        dezenas = [valor];
      }

      if (!Array.isArray(dezenas)) return [];

      return dezenas
        .map(v => {
          if (v === null || v === undefined) return null;
          const str = String(v).trim().replace(",", ".");
          const num = Math.round(parseFloat(str));
          if (!Number.isFinite(num)) return null;
          return (num >= 1 && num <= 25) ? num : null;
        })
        .filter(n => n !== null);
    }

    // Frequ√™ncia dos n√∫meros
    const frequencia = Array(26).fill(0);
    Object.values(concursos).forEach(val => {
      const dezenas = normalizarDezenas(val);
      dezenas.forEach(num => {
        if (num !== null) frequencia[num]++;
      });
    });

    // Organiza por frequ√™ncia
    const numerosComFrequencia = [];
    for (let i = 1; i <= 25; i++) {
      numerosComFrequencia.push({ numero: i, freq: frequencia[i] });
    }
    numerosComFrequencia.sort((a, b) => a.freq - b.freq);

    const menosFrequentes = numerosComFrequencia.slice(0, 8).map(n => n.numero);
    const maisFrequentes = numerosComFrequencia.slice(-7).map(n => n.numero);

    const menosPoolExtras = numerosComFrequencia.slice(0, 10).map(n => n.numero);
    const maisPoolExtras = numerosComFrequencia.slice(-10).map(n => n.numero);

    function sortearAleatorios(array, quantidade) {
      const copia = [...array];
      const resultado = [];
      while (resultado.length < quantidade && copia.length > 0) {
        const idx = Math.floor(Math.random() * copia.length);
        resultado.push(copia.splice(idx, 1)[0]);
      }
      return resultado;
    }

    // Jogo promissor principal
    const selecionados = [
      ...sortearAleatorios(menosFrequentes, 8),
      ...sortearAleatorios(maisFrequentes, 7)
    ];
    const promissor = selecionados.sort((a, b) => a - b);

    window.jogoFixo = promissor;
    if (typeof preencherInputs === "function") preencherInputs(promissor);

    // üîπ Mant√©m layout dos inputs fixos do topo
    const inputsTopo = document.querySelectorAll('#entrada input');
    promissor.forEach((numero, index) => {
      if (inputsTopo[index]) {
        inputsTopo[index].value = String(numero).padStart(2, '0');
        inputsTopo[index].style.backgroundColor =
          maisFrequentes.includes(numero) ? "#0000ff" :
          menosFrequentes.includes(numero) ? "#ff0000" : "#90ee90";
        inputsTopo[index].style.fontWeight = "bold";
        inputsTopo[index].style.fontFamily = "'Orbitron', Arial, sans-serif";
        inputsTopo[index].style.color = "#fff";
      }
    });

    // Pergunta quantos extras
    const entrada = prompt("Quantos jogos adicionais deseja gerar?");
    const qtdJogos = parseInt(entrada, 10);

    if (!isNaN(qtdJogos) && qtdJogos > 0) {
      const limite = Math.min(qtdJogos, 20);
      const jogosExtras = [];
      for (let i = 0; i < limite; i++) {
        const jogo = [
          ...sortearAleatorios(menosPoolExtras, 8),
          ...sortearAleatorios(maisPoolExtras, 7)
        ].sort((a, b) => a - b);
        jogosExtras.push(jogo);
      }

      let resultadoExtras = document.getElementById("resultadoExtras");
      if (!resultadoExtras) {
        resultadoExtras = document.createElement("div");
        resultadoExtras.id = "resultadoExtras";
        resultadoExtras.style.display = "grid";
        resultadoExtras.style.gridTemplateColumns = "1fr";
        resultadoExtras.style.gap = "16px";
        resultadoExtras.style.marginTop = "30px";
        resultadoExtras.style.padding = "10px";
        resultadoExtras.style.boxSizing = "border-box";
        document.body.appendChild(resultadoExtras);
      }

      resultadoExtras.innerHTML = `<p style="grid-column:1/-1; color:#ffcc00; font-weight:bold; font-size:20px;">üü¢ Jogos 100% In√©ditos<br>üé∞ Jogos adicionais (${limite}):</p>`;

      jogosExtras.forEach((jogo, i) => {
        const card = document.createElement("div");
        card.style.background = "#202020";
        card.style.borderRadius = "8px";
        card.style.padding = "12px";
        card.style.color = "#ffffff";
        card.style.fontFamily = "'Orbitron', sans-serif";
        card.style.textAlign = "center";
        card.style.boxShadow = "0 0 8px #00ffd5";

        const titulo = document.createElement("div");
        titulo.textContent = `Jogo ${i + 1}`;
        titulo.style.color = "#ff00ff";
        titulo.style.fontWeight = "bold";
        titulo.style.marginBottom = "8px";
        titulo.style.textShadow = "0 0 6px #ff00ff";
        card.appendChild(titulo);

        const numeros = document.createElement("div");
        numeros.style.display = "flex";
        numeros.style.flexWrap = "wrap";
        numeros.style.justifyContent = "center";
        numeros.style.gap = "8px";
        numeros.style.marginTop = "10px";

        jogo.forEach(num => {
          const span = document.createElement("span");
          span.textContent = String(num).padStart(2,'0');
          span.style.display = "inline-block";
          span.style.width = "48px";
          span.style.height = "48px";
          span.style.lineHeight = "48px";
          span.style.borderRadius = "6px";
          span.style.fontWeight = "bold";
          span.style.fontSize = "20px";
          span.style.fontFamily = "'Orbitron', monospace";
          span.style.textAlign = "center";
          span.style.backgroundColor = "#111";
          span.style.boxShadow = "0 0 8px rgba(0,255,213,0.8)";

          if (maisFrequentes.includes(num)) {
            span.style.color = "#00aaff";
            span.style.border = "2px solid #00aaff";
          } else if (menosFrequentes.includes(num)) {
            span.style.color = "#ff3333";
            span.style.border = "2px solid #ff3333";
          } else {
            span.style.color = "#00ffd5";
            span.style.border = "2px solid #00ffd5";
          }

          numeros.appendChild(span);
        });
        card.appendChild(numeros);

                const obs = document.createElement("div");
        obs.textContent = "üî¥ Vermelho = menos sorteados | üîµ Azul = mais sorteados | üü¢ Verde = intermedi√°rios";
        obs.style.marginTop = "10px";
        obs.style.fontSize = "14px";
        obs.style.color = "#ffffff";
        obs.style.fontWeight = "bold";
        card.appendChild(obs);

        resultadoExtras.appendChild(card);
      });
    }

    atualizarStatus("üéØ Jogo promissor pronto!", "#00ffd5");
  } catch (error) {
    console.error("‚ùå Erro ao preparar jogo promissor:", error);
    atualizarStatus(`‚ùå Erro ao gerar jogo promissor: ${error.message}`, "#ff0000");
  } finally {
    window._promissorBusy = false;
  }
}
</script>

<script>
  function temSequenciaLonga(jogo) {
    const ordenado = [...jogo].sort((a, b) => a - b);
    let count = 1;
    for (let i = 1; i < ordenado.length; i++) {
      if (ordenado[i] === ordenado[i - 1] + 1) {
        count++;
        if (count >= 4) return true;
      } else {
        count = 1;
      }
    }
    return false;
  }

  function distribuicaoLinhaColuna(jogo) {
    const linhas = [[], [], [], [], []];
    const colunas = [[], [], [], [], []];
    jogo.forEach(n => {
      const linha = Math.floor((n - 1) / 5);
      const coluna = (n - 1) % 5;
      linhas[linha].push(n);
      colunas[coluna].push(n);
    });
    return {
      linhasOK: linhas.filter(l => l.length >= 2 && l.length <= 4).length >= 3,
      colunasOK: colunas.filter(c => c.length >= 2 && c.length <= 4).length >= 3
    };
  }

  function analisarJogo(jogo) {
    const molduraBase = [1, 2, 3, 4, 5, 6, 10, 15, 20, 21, 22, 23, 24, 25];
    const moldura = molduraBase.filter(() => Math.random() > 0.3);
    const numerosMoldura = jogo.filter(n => moldura.includes(n)).length;
    const pares = jogo.filter(n => n % 2 === 0).length;
    const soma = jogo.reduce((a, b) => a + b, 0);
    return { moldura: numerosMoldura, pares, soma };
  }
  
  
 
async function buscarConcursoEspecifico() {
  const numero = document.getElementById("concursoInput")?.value || prompt("Digite o n√∫mero do concurso:");
  const concursoInt = parseInt(numero);
  if (!numero || isNaN(concursoInt) || concursoInt < 1) {
    return alert("‚ö†Ô∏è N√∫mero de concurso inv√°lido.");
  }

  const concursoStr = String(concursoInt);
  const infoConcurso = document.getElementById("infoConcurso");
  const inputsTopo = document.querySelectorAll('#entradaTopo input');

  infoConcurso.textContent = "üîÑ Buscando concurso...";
  infoConcurso.style.color = "#4682b4";

  let dezenas = null;

  try {
    // üåê Tenta API da Caixa
    const resApi = await fetch(`https://servicebus2.caixa.gov.br/portaldeloterias/api/lotofacil/${concursoStr}`, {
      headers: { Accept: "application/json" },
      cache: "no-store"
    });

    if (resApi.ok) {
      const dadosApi = await resApi.json();
      dezenas = dadosApi.dezenas || dadosApi.listaDezenas || dadosApi.dezenasSorteadasOrdemSorteio || [];
    }
  } catch (e) {
    console.warn("‚ùå Erro ao buscar concurso na API da Caixa:", e);
  }

  // üîπ Fallback para JSON local se API falhar
  if (!Array.isArray(dezenas) || dezenas.length !== 15) {
    try {
      const resLocal = await fetch("/lotofacil_combinacoes_convertido.json", { cache: "no-store" });
      const dadosLocal = await resLocal.json();
      if (dadosLocal[concursoStr]) {
        dezenas = dadosLocal[concursoStr].dezenas || [];
      }
    } catch (e) {
      console.error("‚ùå Erro ao carregar JSON local:", e);
    }
  }

  // Valida√ß√£o final
  const dezenasNumeros = Array.isArray(dezenas)
    ? dezenas.map(n => parseInt(n)).filter(n => !isNaN(n) && n >= 1 && n <= 25)
    : [];

  if (dezenasNumeros.length !== 15) {
    infoConcurso.textContent = `‚ùå Concurso ${concursoStr} n√£o encontrado.`;
    infoConcurso.style.color = "red";
    return;
  }

  // Preenche topo
  const ordenadas = [...dezenasNumeros].sort((a, b) => a - b);
  const formatadas = ordenadas.map(n => String(n).padStart(2, '0'));

  formatadas.forEach((num, i) => {
    if (inputsTopo[i]) {
      inputsTopo[i].value = num;
      Object.assign(inputsTopo[i].style, {
        backgroundColor: "#f0f8ff",
        fontWeight: "bold",
        fontFamily: "'Orbitron', Arial, sans-serif",
        color: "#000",
        textAlign: "center",
        border: "2px solid #00ffd5",
        borderRadius: "6px",
        padding: "6px",
        fontSize: "19px"
      });
    }
  });

  infoConcurso.textContent = `Concurso n¬∫: ${concursoStr} - ${formatadas.join(" - ")}`;
  infoConcurso.style.color = "#00ffd5";
  infoConcurso.style.fontSize = "22px";
  infoConcurso.style.borderBottom = "2px solid #00ffd5";

  window.jogoFixo = ordenadas;
  registrarConcursoNaMemoria(concursoStr, ordenadas);
}


  // ‚úÖ Cron√¥metro retr√¥ + barra sincronizada
  let cronometroInterval;
  let segundosDecorridos = 0;
  const DURACAO_ESTIMADA_SEGUNDOS = 250;

  function iniciarCronometro() {
    const cronometro = document.getElementById("cronometroRetro");
    if (!cronometro) return;

    segundosDecorridos = 0;
    cronometro.textContent = "‚è±Ô∏è 00:00";

    clearInterval(cronometroInterval);
    cronometroInterval = setInterval(() => {
      segundosDecorridos++;
      const minutos = String(Math.floor(segundosDecorridos / 60)).padStart(2, '0');
      const segundos = String(segundosDecorridos % 60).padStart(2, '0');
      cronometro.textContent = `‚è±Ô∏è ${minutos}:${segundos}`;

      const progressoPercentual = Math.min((segundosDecorridos / DURACAO_ESTIMADA_SEGUNDOS) * 100, 100);
      atualizarBarra(progressoPercentual);
    }, 1000);
  }

  function pararCronometro() {
    clearInterval(cronometroInterval);
  }

  function reiniciarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "0%";
      barra.style.display = "block";
    }
  }

  function atualizarBarra(progressoPercentual) {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = `${progressoPercentual}%`;
    }
  }

  function finalizarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "100%";
      setTimeout(() => {
        barra.style.display = "none";
      }, 1000);
    }
  }
  
  


// ‚úÖ Atualiza concursos da Lotof√°cil e mostra na tela
// ‚úÖ Atualiza concursos da Lotof√°cil e mostra na tela
async function atualizarTodosConcursos() {
  const status = document.getElementById("statusAtualizacao");
  if (status) {
    status.textContent = "‚è≥ Atualizando concursos...";
    status.style.color = "#4682b4";
    status.style.fontWeight = "bold";
  }

  try {
    // üîπ Chama o PHP que executa o Python
    const res = await fetch("./atualizar_concursos.php", { cache: "no-store" });
    const texto = await res.text();

    let dados;
    try {
      dados = JSON.parse(texto);
    } catch {
      console.warn("Resposta bruta do servidor:", texto);
      dados = { sucesso: false, mensagem: "‚ö†Ô∏è Resposta inv√°lida do servidor", bruto: texto };
    }

    // üîπ Normaliza dezenas como no importarUltimos()
    let dezenasRaw = dados.dezenas || dados.listaDezenas || dados.dezenasSorteadasOrdemSorteio || [];
    if (typeof dezenasRaw === "string") {
      try { dezenasRaw = JSON.parse(dezenasRaw); } catch { dezenasRaw = []; }
    }
    const dezenas = Array.isArray(dezenasRaw)
      ? dezenasRaw.map(n => Number(n))
          .filter(n => Number.isInteger(n) && n >= 1 && n <= 25)
          .sort((a, b) => a - b)
          .slice(0, 15)
      : [];

    dados.dezenas = dezenas;

    if (status) {
      if (dados.sucesso) {
        status.textContent = "üéâ Concursos atualizados com sucesso!";
        status.style.color = "#00aa00";
        if (dados.totalConcursos) {
          status.textContent += ` (üìä ${dados.totalConcursos} concursos no arquivo)`;
        }
      } else {
        status.textContent = dados.mensagem || "‚ö†Ô∏è N√£o foi poss√≠vel atualizar.";
        status.style.color = "#cc6600";
      }
    }

    // üîπ Renderiza na tela o √∫ltimo concurso
    renderizarConcursoLotofacil(dados);

  } catch (e) {
    if (status) {
      status.textContent = "üö´ Erro ao atualizar concursos.";
      status.style.color = "#cc0000";
    }
    console.error("Erro:", e);
  }
}
// üîπ Renderiza dezenas, jogo sugerido e array din√¢mica
function renderizarConcursoLotofacil(dados) {
  const numero = dados.ultimoSalvo ?? "desconhecido";
  const data = dados.dataConcurso ?? "";
  const dezenas = Array.isArray(dados.dezenas) ? dados.dezenas : [];
  const jogos = Array.isArray(dados.jogos) ? dados.jogos : [];
  const melhores = Array.isArray(dados.melhores) ? dados.melhores : [];

  let container = document.getElementById("resultadoDinamico");
  if (!container) {
    container = document.createElement("div");
    container.id = "resultadoDinamico";
    const area = document.getElementById("areaResultados");
    if (area) area.appendChild(container);
  }
  container.innerHTML = "";

  // T√≠tulo
  const titulo = document.createElement("h3");
  titulo.textContent = `Concurso n¬∫ ${numero}${data ? " - " + data : ""}`;
  container.appendChild(titulo);

  // Grid de dezenas
  const grid = document.createElement("div");
  grid.classList.add("dezenas-grid");
  dezenas.forEach(n => {
    const span = document.createElement("span");
    span.textContent = String(n).padStart(2, "0");
    span.classList.add("dezena");
    grid.appendChild(span);
  });
  container.appendChild(grid);

  // √öltimo jogo sugerido
  if (jogos.length > 0) {
    const ultimoJogo = jogos[0];
    const jogosDiv = document.createElement("div");
    jogosDiv.classList.add("jogo-sugerido");
    jogosDiv.innerHTML = "<strong>üéØ √öltimo jogo sugerido:</strong><br>" +
      ultimoJogo.map(n =>
        `<span class="${melhores.includes(n) ? 'melhor' : 'normal'}">${String(n).padStart(2,"0")}</span>`
      ).join(" ");
    container.appendChild(jogosDiv);
  }

  // Array din√¢mica
  const arrayDiv = document.createElement("div");
  arrayDiv.classList.add("array-concurso");
  arrayDiv.innerHTML =
    `<strong>üìä √öltimo concurso n¬∫ ${numero}${data ? " - " + data : ""}:</strong><br>` +
    `[ ${dezenas.map(n => String(n).padStart(2,"0")).join(", ")} ]`;
  container.appendChild(arrayDiv);
}

// ‚úÖ Importa o √∫ltimo concurso direto da API da Caixa
async function importarUltimos() {
  const infoConcurso = document.getElementById("infoConcurso");
  const inputsTopo = document.querySelectorAll('#entradaTopo input');
  infoConcurso.textContent = "‚è≥ Buscando √∫ltimo concurso...";
  infoConcurso.style.color = "#4682b4";

  try {
    // üåê Consulta direto a API oficial da Caixa
    const resApi = await fetch("https://servicebus2.caixa.gov.br/portaldeloterias/api/lotofacil", {
      headers: { Accept: "application/json" },
      cache: "no-store"
    });
    const dadosApi = await resApi.json();

    // Extrai n√∫mero do concurso e dezenas
    const numero = dadosApi.numero || dadosApi.concurso || (dadosApi.resultado ? dadosApi.resultado.numero : null);
    let dezenasRaw = dadosApi.dezenas || dadosApi.listaDezenas || dadosApi.dezenasSorteadasOrdemSorteio || [];

    // Normaliza dezenas
    if (!Array.isArray(dezenasRaw)) {
      try {
        dezenasRaw = JSON.parse(dezenasRaw);
      } catch {
        dezenasRaw = [];
      }
    }

    const dezenas = dezenasRaw
      .map(n => Number(n))
      .filter(n => Number.isInteger(n) && n >= 1 && n <= 25)
      .sort((a, b) => a - b)
      .slice(0, 15);

    // ‚úÖ valida√ß√£o final
    if (dezenas.length !== 15 || !numero) {
      infoConcurso.textContent = "‚ùå √öltimo concurso n√£o encontrado ou incompleto.";
      infoConcurso.style.color = "red";
      return;
    }

    // ‚úÖ formata dezenas
    const formatadas = dezenas.map(n => String(n).padStart(2, '0'));

    // ‚úÖ joga nos inputs do topo
    formatadas.forEach((num, i) => {
      if (inputsTopo[i]) {
        inputsTopo[i].value = num;
        Object.assign(inputsTopo[i].style, {
          backgroundColor: "#000000",
          fontWeight: "bold",
          fontFamily: "'Orbitron', Arial, sans-serif",
          color: "#FFA500",
          textAlign: "center",
          border: "2px solid #00ffd5",
          borderRadius: "6px",
          padding: "6px",
          fontSize: "19px"
        });
      }
    });

    // ‚úÖ exibe info do concurso
    infoConcurso.textContent = `Concurso n¬∫ ${numero} - ${formatadas.join(" - ")}`;
    Object.assign(infoConcurso.style, {
      color: "#00ffd5",
      fontSize: "22px",
      borderBottom: "2px solid #00ffd5"
    });

    // ‚úÖ guarda em vari√°vel global
    window.jogoFixo = dezenas;

  } catch (e) {
    console.error("‚ùå Erro ao carregar dados da API da Caixa:", e);
    infoConcurso.textContent = "üö´ Falha ao buscar √∫ltimo concurso.";
    infoConcurso.style.color = "red";
  }
}

async function sorteioBitcoin() {
  const entradaTopo = document.querySelectorAll('#entradaTopo input');
  const resultado = document.getElementById("resultadoBitcoin");

  resultado.innerHTML = "";
  resultado.style.display = "flex";
  resultado.style.flexDirection = "column";
  resultado.style.alignItems = "center";
  resultado.style.padding = "20px";
  resultado.style.boxSizing = "border-box";

  // Verifica se existem at√© 20 inputs
  if (!entradaTopo || entradaTopo.length < 15 || entradaTopo.length > 20 || !resultado) {
    resultado.innerHTML = "<p style='color:red; font-weight:bold;'>‚ö†Ô∏è Preencha entre 15 e 20 dezenas v√°lidas no topo antes de sortear.</p>";
    return;
  }

  // Captura os n√∫meros digitados
  const numerosOriginais = Array.from(entradaTopo)
    .map(input => parseInt(input.value))
    .filter((val, idx, arr) => !isNaN(val) && val >= 1 && val <= 25 && arr.indexOf(val) === idx);

  if (numerosOriginais.length < 15 || numerosOriginais.length > 20) {
    resultado.innerHTML = "<p style='color:red; font-weight:bold;'>‚ö†Ô∏è Os n√∫meros devem ser √∫nicos e entre 1 e 25 (m√≠nimo 15, m√°ximo 20).</p>";
    return;
  }

  // Quantos jogos gerar
  let qtdJogos = parseInt(prompt("Quantos jogos deseja gerar? (1 a 100)"), 10);
  if (isNaN(qtdJogos) || qtdJogos < 1 || qtdJogos > 100) {
    alert("Valor inv√°lido! Ser√° usado o padr√£o de 9 jogos.");
    qtdJogos = 9;
  }

  const universo = Array.from({ length: 25 }, (_, i) => i + 1);

  // üîπ Carregamento apenas do JSON local
  let jogosAnteriores = {};
  try {
    const response = await fetch("/SorteioApp/lotofacil_combinacoes_convertido.json", { cache: "no-store" });
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    const texto = await response.text();
    try {
      jogosAnteriores = JSON.parse(texto);
    } catch (e) {
      console.error("Resposta n√£o era JSON:", texto.slice(0, 300));
      throw new Error("Formato inv√°lido do JSON local");
    }
  } catch (err) {
    console.error("Erro ao carregar JSON local:", err);
    resultado.innerHTML = "<p style='color:red; font-weight:bold;'>‚ùå Falha ao carregar o JSON local.</p>";
    return;
  }

  // Normalizador universal
  function normalizarJogo(jogo) {
    const dezenasBrutas = Array.isArray(jogo)
      ? jogo
      : Array.isArray(jogo?.dezenas)
        ? jogo.dezenas
        : null;

    if (!Array.isArray(dezenasBrutas)) return [];

    const nums = dezenasBrutas
      .map(v => {
        if (v === null || v === undefined) return null;
        const str = String(v).trim().replace(",", ".");
        const num = Math.round(parseFloat(str));
        if (!Number.isFinite(num)) return null;
        return (num >= 1 && num <= 25) ? num : null;
      })
      .filter(n => n !== null);

    return Array.from(new Set(nums)).sort((a, b) => a - b);
  }

  const contagem = {};
  const trioContador = {};
  for (let i = 1; i <= 25; i++) contagem[i] = 0;

  Object.values(jogosAnteriores).forEach(item => {
    const dezenas = normalizarJogo(item);
    if (dezenas.length) {
      dezenas.forEach(num => {
        if (contagem[num] !== undefined) contagem[num]++;
      });
      for (let i = 0; i < dezenas.length - 2; i++) {
        const trio = dezenas.slice(i, i + 3).sort((a, b) => a - b).join("-");
        trioContador[trio] = (trioContador[trio] || 0) + 1;
      }
    }
  });

  const melhores13 = Object.entries(contagem)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 13)
    .map(([num]) => parseInt(num));

  const molduraSet = new Set([1,2,3,4,5,6,10,11,15,16,20,21,25]);

  function calcularEntropia(jogo) {
    const grupos = {
      A: jogo.filter(n => n <= 5).length,
      B: jogo.filter(n => n >= 6 && n <= 10).length,
      C: jogo.filter(n => n >= 11 && n <= 15).length,
      D: jogo.filter(n => n >= 16 && n <= 20).length,
      E: jogo.filter(n => n >= 21).length,
    };
    return Object.values(grupos).reduce((acc, qtd) => {
      if (qtd > 0) {
        const p = qtd / 15;
        acc -= p * Math.log2(p);
      }
      return acc;
    }, 0);
  }

  function validarPeneiras(jogo) {
    const soma = jogo.reduce((acc, n) => acc + n, 0);
    const pares = jogo.filter(n => n % 2 === 0).length;
    const moldura = jogo.filter(n => molduraSet.has(n)).length;
    const repetidas = jogo.filter(n => numerosOriginais.includes(n)).length;
    const entropia = calcularEntropia(jogo);

    let sequencia = 1;
    for (let i = 1; i < jogo.length; i++) {
      if (jogo[i] === jogo[i - 1] + 1) {
        sequencia++;
        if (sequencia > 3) return false;
      } else {
        sequencia = 1;
      }
    }

    const linhas = [0,0,0,0,0];
    const colunas = [0,0,0,0,0];
    jogo.forEach(n => {
      linhas[Math.floor((n - 1) / 5)]++;
      colunas[(n - 1) % 5]++;
    });
    if (linhas.some(l => l < 2 || l > 4)) return false;
    if (colunas.some(c => c < 2 || c > 4)) return false;

    for (let i = 0; i < jogo.length - 2; i++) {
      const trio = jogo.slice(i, i + 3).sort((a, b) => a - b).join("-");
      if (trioContador[trio] && trioContador[trio] > 8) return false;
    }

    const espelho = jogo.every(n => numerosOriginais.includes(26 - n));
    if (espelho) return false;

    return (
      soma >= 170 && soma <= 230 &&
      pares >= 6 && pares <= 9 &&
      moldura >= 6 && moldura <= 9 &&
      repetidas >= 5 && repetidas <= 9 &&
      entropia >= 1.8 && entropia <= 2.3
    );
  }

  async function sorteioBitcoin() {
  const entradaTopo = document.querySelectorAll('#entradaTopo input');
  const resultado = document.getElementById("resultadoBitcoin");

  resultado.innerHTML = "";
  resultado.style.display = "flex";
  resultado.style.flexDirection = "column";
  resultado.style.alignItems = "center";
  resultado.style.padding = "20px";
  resultado.style.boxSizing = "border-box";

  // Verifica se existem at√© 20 inputs
  if (!entradaTopo || entradaTopo.length < 15 || entradaTopo.length > 20 || !resultado) {
    resultado.innerHTML = "<p style='color:red; font-weight:bold;'>‚ö†Ô∏è Preencha entre 15 e 20 dezenas v√°lidas no topo antes de sortear.</p>";
    return;
  }

  // Captura os n√∫meros digitados
  const numerosOriginais = Array.from(entradaTopo)
    .map(input => parseInt(input.value))
    .filter((val, idx, arr) => !isNaN(val) && val >= 1 && val <= 25 && arr.indexOf(val) === idx);

  if (numerosOriginais.length < 15 || numerosOriginais.length > 20) {
    resultado.innerHTML = "<p style='color:red; font-weight:bold;'>‚ö†Ô∏è Os n√∫meros devem ser √∫nicos e entre 1 e 25 (m√≠nimo 15, m√°ximo 20).</p>";
    return;
  }

  // Quantos jogos gerar (substitu√≠ prompt por input mais amig√°vel)
  let qtdJogos = parseInt(document.getElementById("qtdJogosInput")?.value || "9", 10);
  if (isNaN(qtdJogos) || qtdJogos < 1 || qtdJogos > 100) {
    alert("Valor inv√°lido! Ser√° usado o padr√£o de 9 jogos.");
    qtdJogos = 9;
  }

  const universo = Array.from({ length: 25 }, (_, i) => i + 1);

  // üîπ Carregamento do JSON local (corrigido para Vercel)
  let jogosAnteriores = {};
  try {
    const response = await fetch("/lotofacil_combinacoes_convertido.json", { cache: "no-store" });
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    const texto = await response.text();
    jogosAnteriores = JSON.parse(texto);
  } catch (err) {
    console.error("Erro ao carregar JSON local:", err);
    resultado.innerHTML = "<p style='color:red; font-weight:bold;'>‚ùå Falha ao carregar o JSON local.</p>";
    return;
  }

  // Normalizador universal
  function normalizarJogo(jogo) {
    const dezenasBrutas = Array.isArray(jogo)
      ? jogo
      : Array.isArray(jogo?.dezenas)
        ? jogo.dezenas
        : null;

    if (!Array.isArray(dezenasBrutas)) return [];

    const nums = dezenasBrutas
      .map(v => {
        if (v === null || v === undefined) return null;
        const str = String(v).trim().replace(",", ".");
        const num = Math.round(parseFloat(str));
        if (!Number.isFinite(num)) return null;
        return (num >= 1 && num <= 25) ? num : null;
      })
      .filter(n => n !== null);

    return Array.from(new Set(nums)).sort((a, b) => a - b);
  }

  const contagem = {};
  const trioContador = {};
  for (let i = 1; i <= 25; i++) contagem[i] = 0;

  Object.values(jogosAnteriores).forEach(item => {
    const dezenas = normalizarJogo(item);
    if (dezenas.length) {
      dezenas.forEach(num => {
        if (contagem[num] !== undefined) contagem[num]++;
      });
      for (let i = 0; i < dezenas.length - 2; i++) {
        const trio = dezenas.slice(i, i + 3).sort((a, b) => a - b).join("-");
        trioContador[trio] = (trioContador[trio] || 0) + 1;
      }
    }
  });

  const melhores13 = Object.entries(contagem)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 13)
    .map(([num]) => parseInt(num));

  const molduraSet = new Set([1,2,3,4,5,6,10,11,15,16,20,21,25]);

  function calcularEntropia(jogo) {
    const grupos = {
      A: jogo.filter(n => n <= 5).length,
      B: jogo.filter(n => n >= 6 && n <= 10).length,
      C: jogo.filter(n => n >= 11 && n <= 15).length,
      D: jogo.filter(n => n >= 16 && n <= 20).length,
      E: jogo.filter(n => n >= 21).length,
    };
    return Object.values(grupos).reduce((acc, qtd) => {
      if (qtd > 0) {
        const p = qtd / 15;
        acc -= p * Math.log2(p);
      }
      return acc;
    }, 0);
  }

  function validarPeneiras(jogo) {
    const soma = jogo.reduce((acc, n) => acc + n, 0);
    const pares = jogo.filter(n => n % 2 === 0).length;
    const moldura = jogo.filter(n => molduraSet.has(n)).length;
    const repetidas = jogo.filter(n => numerosOriginais.includes(n)).length;
    const entropia = calcularEntropia(jogo);

    let sequencia = 1;
    for (let i = 1; i < jogo.length; i++) {
      if (jogo[i] === jogo[i - 1] + 1) {
        sequencia++;
        if (sequencia > 3) return false;
      } else {
        sequencia = 1;
      }
    }

    const linhas = [0,0,0,0,0];
    const colunas = [0,0,0,0,0];
    jogo.forEach(n => {
      linhas[Math.floor((n - 1) / 5)]++;
      colunas[(n - 1) % 5]++;
    });
    if (linhas.some(l => l < 2 || l > 4)) return false;
    if (colunas.some(c => c < 2 || c > 4)) return false;

    for (let i = 0; i < jogo.length - 2; i++) {
      const trio = jogo.slice(i, i + 3).sort((a, b) => a - b).join("-");
      if (trioContador[trio] && trioContador[trio] > 8) return false;
    }

    const espelho = jogo.every(n => numerosOriginais.includes(26 - n));
    if (espelho) return false;

    return (
      soma >= 170 && soma <= 230 &&
      pares >= 6 && pares <= 9 &&
      moldura >= 6 && moldura <= 9 &&
      repetidas >= 5 && repetidas <= 9 &&
      entropia >= 1.8 && entropia <= 2.3
    );
  }
    function calcularIPE(jogo, soma, pares, moldura, filtrados) {
    let pontos = 0;
    if (soma >= 180 && soma <= 210) pontos++;
    if (pares >= 6 && pares <= 9) pontos++;
    if (moldura >= 8 && moldura <= 11) pontos++;
    if (filtrados.length >= 8) pontos++;

    let seq = 1;
    for (let i = 1; i < jogo.length; i++) {
      if (jogo[i] === jogo[i - 1] + 1) {
        seq++;
        if (seq > 2) break;
      } else {
        seq = 1;
      }
    }
    if (seq <= 2) pontos++;
    return pontos;
  }

  const jogosComIPE = [];

  for (let j = 1; j <= qtdJogos; j++) {
    let tentativa = 0;
    let jogoFinal = [];

    while (tentativa < 500) { // üîß reduzi de 1000 para 500 para evitar travar em celulares
      const reaproveitados = [];
      while (reaproveitados.length < 9) {
        const n = numerosOriginais[Math.floor(Math.random() * numerosOriginais.length)];
        if (!reaproveitados.includes(n)) reaproveitados.push(n);
      }

      const restantes = universo.filter(n => !reaproveitados.includes(n));
      const novos = [];
      while (novos.length < 6) {
        const n = restantes[Math.floor(Math.random() * restantes.length)];
        if (!novos.includes(n)) novos.push(n);
      }

      jogoFinal = [...reaproveitados, ...novos].sort((a, b) => a - b);
      if (validarPeneiras(jogoFinal)) break;
      tentativa++;
    }

    const soma = jogoFinal.reduce((acc, n) => acc + n, 0);
    const pares = jogoFinal.filter(n => n % 2 === 0).length;
    const moldura = jogoFinal.filter(n => molduraSet.has(n)).length;
    const filtrados = jogoFinal.filter(n => melhores13.includes(n));
    const ipe = calcularIPE(jogoFinal, soma, pares, moldura, filtrados);

    jogosComIPE.push({ jogo: jogoFinal, ipe, soma, pares, moldura, filtrados });
  }

  // üîπ Renderiza√ß√£o dos jogos
  const container = document.createElement("div");
  container.style.display = "flex";
  container.style.flexDirection = "column";
  container.style.alignItems = "center";
  container.style.maxWidth = "600px";
  container.style.width = "100%";

  const titulo = document.createElement("h3");
  titulo.textContent = "üèÜ Ganhador estilo Bitcoin";
  titulo.style.color = "#00ffd5";
  titulo.style.marginBottom = "20px";
  container.appendChild(titulo);

  jogosComIPE.forEach((jogoObj, index) => {
    const cor = jogoObj.ipe === 5 ? "#00ff80" : jogoObj.ipe === 4 ? "#ffd700" : "#999";
    const bg = jogoObj.ipe === 5 ? "#003322" : jogoObj.ipe === 4 ? "#332900" : "#1a1a1a";
    const emoji = jogoObj.ipe === 5 ? "üíé" : jogoObj.ipe === 4 ? "‚≠ê" : "üé≤";

    const bloco = document.createElement("div");
    bloco.style.marginBottom = "18px";
    bloco.style.border = `2px solid ${cor}`;
    bloco.style.backgroundColor = bg;
    bloco.style.padding = "12px";
    bloco.style.borderRadius = "10px";
    bloco.style.width = "100%";
    bloco.style.boxSizing = "border-box";
    bloco.style.color = cor;

    const cabecalho = document.createElement("strong");
    cabecalho.innerHTML = `${emoji} Jogo ${index + 1} (IPE ${jogoObj.ipe}/5):`;
    bloco.appendChild(cabecalho);

    const linha = document.createElement("div");
    linha.style.margin = "10px 0";
    linha.style.display = "flex";
    linha.style.flexWrap = "wrap";
    linha.style.justifyContent = "center";
    linha.style.gap = "6px";

    jogoObj.jogo.forEach(n => {
      const span = document.createElement("span");
      span.textContent = String(n).padStart(2, '0');
      span.style.display = "inline-block";
      span.style.width = "48px";
      span.style.height = "48px";
      span.style.lineHeight = "48px";
      span.style.textAlign = "center";
      span.style.fontWeight = "bold";
      span.style.fontSize = "18px";
      span.style.borderRadius = "6px";
      span.style.color = "#ffffff";
      span.style.backgroundColor = numerosOriginais.includes(n) ? "#004d33" : "#00264d";
      span.style.boxShadow = `0 0 6px ${cor}`;
      linha.appendChild(span);
    });

    bloco.appendChild(linha);

    const info = document.createElement("div");
    info.innerHTML = `
      üìä Soma: ${jogoObj.soma} | ‚öñÔ∏è Pares: ${jogoObj.pares} | √çmpares: ${15 - jogoObj.pares} | üß© Moldura: ${jogoObj.moldura}<br>
      üîç Frequentes: ${jogoObj.filtrados.join(", ")}<br>
      <strong style="color:${cor};">üåü √çndice de Performance Estrat√©gica: ${jogoObj.ipe}/5</strong>
    `;
    bloco.appendChild(info);
    container.appendChild(bloco);
  });

  resultado.appendChild(container);

  const inspiracao = document.createElement("div");
  inspiracao.innerHTML = `
    <p style="color: #ffd700; font-style: italic; margin-top: 20px;">
      üí° Em janeiro de 2023, um minerador solo com apenas <strong>49 TH/s</strong> encontrou sozinho o bloco <strong>907283</strong> do Bitcoin.
      <br>
      Chance estimada: <strong>1 em 130 mil por dia</strong>. Recompensa: <strong>3,154 BTC</strong> (~R$ 2 milh√µes).
      <br><br>
      Essa fa√ßanha n√£o foi sorte ‚Äî foi persist√™ncia, estrat√©gia e f√© na improbabilidade.
      <br><br>
      Cada jogo aqui carrega esse esp√≠rito: uma chance rara, mas real, de romper a l√≥gica e surpreender.
      <br><br>
      Que a sorte esteja do seu lado. üçÄüöÄ
    </p>
  `;
  resultado.appendChild(inspiracao);
}
  
  
  
  
  
  
  
  
  
  
  

async function gerarJogosPromissores() {
  let qtd = prompt("üéØ Quantos jogos deseja gerar? (1 a 15)");
  qtd = parseInt(qtd, 10);

  if (isNaN(qtd) || qtd < 1 || qtd > 15) {
    alert("Por favor, insira um n√∫mero entre 1 e 15.");
    return;
  }

  try {
    // üîπ Carregamento h√≠brido
    let historicoConcursos = {};
    const isNetlify = window.location.hostname.includes("netlify.app") || window.location.hostname.includes("localhost:8888");

    if (isNetlify) {
      const res = await fetch("/.netlify/functions/listar_concursos");
      const { lista } = await res.json();

      for (const blob of lista.blobs) {
        const id = blob.key.replace("concurso-", "");
        const resConcurso = await fetch(`/.netlify/functions/listar_concursos?id=${id}`);
        const { dados } = await resConcurso.json();
        historicoConcursos[id] = dados;
      }
    } else {
      const res = await fetch("/SorteioApp/lotofacil_combinacoes_convertido.json", { cache: "no-store" });
      if (!res.ok) throw new Error(`Erro HTTP ${res.status}`);
      historicoConcursos = await res.json();
    }

    // üîπ Normalizador universal para dezenas
    function normalizarDezenas(valor) {
      let dezenas = null;
      if (Array.isArray(valor)) dezenas = valor;
      else if (Array.isArray(valor?.dezenas)) dezenas = valor.dezenas;
      else if (typeof valor === "string") dezenas = valor.split(/[\s,;|.-]+/);
      else if (typeof valor === "number") dezenas = [valor];
      if (!Array.isArray(dezenas)) return [];

      return dezenas
        .map(v => {
          if (v === null || v === undefined) return null;
          const str = String(v).trim().replace(",", ".");
          const num = Math.round(parseFloat(str));
          if (!Number.isFinite(num)) return null;
          return (num >= 1 && num <= 25) ? num : null;
        })
        .filter(n => n !== null);
    }

    // üîπ Container de sa√≠da
    const container = document.getElementById("jogosGerados");
    if (!container) throw new Error("Elemento #jogosGerados n√£o encontrado no HTML.");
    container.style.display = "flex";
    container.style.flexDirection = "column";
    container.style.alignItems = "center";
    container.style.justifyContent = "center";
    container.style.flexWrap = "wrap";
    container.style.gap = "16px";
    container.style.marginTop = "20px";

    container.innerHTML = "<h3 style='color:#00ffd5;'>üìà Estrat√©gias Otimizadas (12 a 14 pts):</h3>";

    // üîπ Legenda visual
    const legenda = document.createElement("div");
    legenda.style.display = "flex";
    legenda.style.justifyContent = "center";
    legenda.style.gap = "20px";
    legenda.style.marginBottom = "20px";
    legenda.style.color = "#f0f0f0";
    legenda.style.fontSize = "14px";
    legenda.style.fontWeight = "bold";

    const par = document.createElement("span");
    par.textContent = "üîµ Pares";
    par.style.color = "#0044cc";

    const impar = document.createElement("span");
    impar.textContent = "üî¥ √çmpares";
    impar.style.color = "#cc3300";

    legenda.appendChild(par);
    legenda.appendChild(impar);
    container.appendChild(legenda);

    const candidatos = [];
    const frequenciaReal = {};
    const concursosFormatados = Object.values(historicoConcursos)
      .map(item => normalizarDezenas(item))
      .filter(arr => Array.isArray(arr) && arr.length === 15);

    concursosFormatados.forEach(dezenas => {
      dezenas.forEach(n => {
        frequenciaReal[n] = (frequenciaReal[n] || 0) + 1;
      });
    });

    // Frequ√™ncia simulada
    const frequenciaSimulada = Array(25).fill(0);
    for (let i = 0; i < 1000; i++) {
      const sorteados = [];
      while (sorteados.length < 15) {
        const n = Math.floor(Math.random() * 25) + 1;
        if (!sorteados.includes(n)) sorteados.push(n);
      }
      sorteados.forEach(n => frequenciaSimulada[n - 1]++);
    }

    // Peso final
    const pesoFinal = {};
    for (let i = 1; i <= 25; i++) {
      const real = frequenciaReal[i] || 0;
      const simulado = frequenciaSimulada[i - 1] || 0;
      pesoFinal[i] = (real * 0.5) + (simulado * 0.5);
    }

    // Gera√ß√£o de candidatos
    for (let i = 0; i < 100; i++) {
      const jogo = [];
      while (jogo.length < 15) {
        const n = Math.floor(Math.random() * 25) + 1;
        if (!jogo.includes(n)) jogo.push(n);
      }
      jogo.sort((a, b) => a - b);

      let vezesEntre12e14 = 0;
      concursosFormatados.forEach(concurso => {
        const acertos = jogo.filter(n => concurso.includes(n)).length;
        if (acertos >= 12 && acertos <= 14) vezesEntre12e14++;
      });

      candidatos.push({ jogo, vezesEntre12e14 });
    }

    candidatos.sort((a, b) => b.vezesEntre12e14 - a.vezesEntre12e14);
    const melhores = candidatos.slice(0, qtd);
	
	    // üîπ Fun√ß√£o para simular probabilidade de 13‚Äì15 pontos
    function testarProbabilidade(jogo, simulacoes = 3000) {
      let acertos1315 = 0;
      for (let i = 0; i < simulacoes; i++) {
        const sorteio = [];
        while (sorteio.length < 15) {
          const n = Math.floor(Math.random() * 25) + 1;
          if (!sorteio.includes(n)) sorteio.push(n);
        }
        const acertos = jogo.filter(n => sorteio.includes(n)).length;
        if (acertos >= 13 && acertos <= 15) acertos1315++;
      }
      return (acertos1315 / simulacoes * 100).toFixed(2);
    }

    // Exibir jogos originais
    melhores.forEach(({ jogo, vezesEntre12e14 }, index) => {
      const bloco = document.createElement("div");
      bloco.style.display = "flex";
      bloco.style.flexDirection = "column";
      bloco.style.alignItems = "center";
      bloco.style.justifyContent = "center";
      bloco.style.marginBottom = "20px";
      bloco.style.padding = "12px";
      bloco.style.border = "1px solid #888";
      bloco.style.borderRadius = "10px";
      bloco.style.backgroundColor = "#1e1e1e";
      bloco.style.color = "#f0f0f0";

      const titulo = document.createElement("h4");
      titulo.textContent = `üé≤ Jogo ${index + 1}`;
      titulo.style.marginBottom = "10px";
      titulo.style.color = "#00ffd5";
      bloco.appendChild(titulo);

      const dezenasDiv = document.createElement("div");
      dezenasDiv.style.display = "flex";
      dezenasDiv.style.flexWrap = "wrap";
      dezenasDiv.style.gap = "8px";
      dezenasDiv.style.justifyContent = "center";

      jogo.forEach(num => {
        const span = document.createElement("span");
        span.textContent = String(num).padStart(2, '0');
        span.style.padding = "6px 10px";
        span.style.borderRadius = "6px";
        span.style.fontWeight = "bold";
        span.style.fontSize = "16px";
        span.style.boxShadow = "0 0 4px rgba(255, 255, 255, 0.2)";
        // üîπ Cores: pares = azul, √≠mpares = vermelho
        if (num % 2 === 0) {
          span.style.backgroundColor = "#0044cc";
          span.style.color = "#ffffff";
        } else {
          span.style.backgroundColor = "#cc3300";
          span.style.color = "#ffffff";
        }
        dezenasDiv.appendChild(span);
      });

      bloco.appendChild(dezenasDiv);

      const probabilidade = testarProbabilidade(jogo, 3000);
      const info = document.createElement("div");
      info.textContent = `üéØ Frequ√™ncia 12‚Äì14 pts: ${vezesEntre12e14} | üî• Probabilidade 13‚Äì15 pts: ${probabilidade}%`;
      info.style.marginTop = "12px";
      info.style.color = "#87cefa";
      bloco.appendChild(info);

      container.appendChild(bloco);
    });

    // üîπ Complemento: gerar varia√ß√µes trocando 3 dezenas
    function gerarVariacao(jogoBase, dezenasForaRanking) {
      let novoJogo = [...jogoBase];
      let posicoes = [];
      while (posicoes.length < 3) {
        let r = Math.floor(Math.random() * novoJogo.length);
        if (!posicoes.includes(r)) posicoes.push(r);
      }
      posicoes.forEach((pos, i) => {
        const novaDezena = dezenasForaRanking[i];
        if (novaDezena !== undefined && !novoJogo.includes(novaDezena)) {
          novoJogo[pos] = novaDezena;
        }
      });
      while (new Set(novoJogo).size < 15) {
        const candidato = Math.floor(Math.random() * 25) + 1;
        if (!novoJogo.includes(candidato)) {
          novoJogo.push(candidato);
        }
      }
      return Array.from(new Set(novoJogo)).sort((a, b) => a - b);
    }

    const ordenadasPorFreq = Object.entries(frequenciaReal)
      .sort((a, b) => a[1] - b[1])
      .map(([num]) => parseInt(num, 10));
    const dezenasForaRanking = ordenadasPorFreq.slice(0, 5);

    const jogosVariados = melhores.map(m => gerarVariacao(m.jogo, dezenasForaRanking));

    jogosVariados.forEach((jogo, index) => {
      const bloco = document.createElement("div");
      bloco.style.marginBottom = "20px";
      bloco.style.padding = "12px";
      bloco.style.border = "1px dashed #aaa";
      bloco.style.borderRadius = "10px";
      bloco.style.backgroundColor = "#2a2a2a";
      bloco.style.color = "#f0f0f0";

      const titulo = document.createElement("h4");
      titulo.textContent = `‚ú® Varia√ß√£o ${index + 1}`;
      titulo.style.marginBottom = "10px";
      titulo.style.color = "#ff69b4";
      bloco.appendChild(titulo);

      const dezenasDiv = document.createElement("div");
      dezenasDiv.style.display = "flex";
      dezenasDiv.style.flexWrap = "wrap";
      dezenasDiv.style.gap = "8px";
      dezenasDiv.style.justifyContent = "center";

      jogo.forEach(num => {
        const span = document.createElement("span");
        span.textContent = String(num).padStart(2, '0');
        span.style.padding = "6px 10px";
        span.style.borderRadius = "6px";
        span.style.fontWeight = "bold";
        span.style.fontSize = "16px";
        span.style.boxShadow = "0 0 4px rgba(0, 255, 213, 0.4)";
        if (num % 2 === 0) {
          span.style.backgroundColor = "#0044cc";
          span.style.color = "#ffffff";
        } else {
          span.style.backgroundColor = "#cc3300";
          span.style.color = "#ffffff";
        }
        dezenasDiv.appendChild(span);
      });

      bloco.appendChild(dezenasDiv);

      const info = document.createElement("div");
      info.textContent = "üîÑ Jogo gerado com 3 dezenas trocadas (fora do ranking principal)";
      info.style.marginTop = "12px";
      info.style.color = "#87cefa";
      bloco.appendChild(info);

      container.appendChild(bloco);
    });

    atualizarStatus(`${qtd} jogos com maior recorr√™ncia entre 12 e 14 pontos gerados, incluindo varia√ß√µes e probabilidade simulada! üß†`, "#00ffd5");
  } catch (err) {
    console.error("‚ùå Erro ao carregar hist√≥rico:", err);
    atualizarStatus("‚ùå Falha ao gerar jogos promissores.", "#ff0000");
  }
}

  
  


  
  
  
  
  
  
  
  
				
				
 // ‚úÖ Fun√ß√£o h√≠brida: Local + Netlify, blindada para aceitar v√°rios formatos

	
	
	
	





  
	  
	  

// üîπ Expor no escopo global para funcionar com onclick no HTML
//window.gerarJogosPromissores = gerarJogosPromissores;
  // ‚úÖ Registro global de fun√ß√µes
  document.addEventListener("DOMContentLoaded", () => {
    window.sortearComLogica = sortearComLogica;
    window.gerarJogosPromissores = gerarJogosPromissores;
    window.importarUltimos = importarUltimos;
    window.verTriosMaisComuns = verTriosMaisComuns;
    window.avaliarConjuntoPython = avaliarConjuntoPython;
    window.gerarSugestao = gerarSugestao;
	
	
    window.sortearComFrequencia = sortearComFrequencia;
	
    window.prepararPromissor = prepararPromissor;
    window.logicaGanhadorBitcoin = logicaGanhadorBitcoin;
    window.buscarConcursoEspecifico = buscarConcursoEspecifico;
	

	


    // Fun√ß√µes auxiliares
    window.limparInterfaceCompleta = limparInterfaceCompleta;
    window.limparJogoFixo = limparJogoFixo;
    window.carregarCombinacoesReais = carregarCombinacoesReais;
    window.atualizarConcursos = atualizarConcursos;
    window.exibirResultado = exibirResultado;
    window.preencherInputs = preencherInputs;
    window.atualizarStatus = atualizarStatus;
    window.atualizarTopo = atualizarTopo;

    // Cron√¥metro e barra
    window.iniciarCronometro = iniciarCronometro;
    window.pararCronometro = pararCronometro;
    window.reiniciarBarra = reiniciarBarra;
    window.atualizarBarra = atualizarBarra;
    window.finalizarBarra = finalizarBarra;
	

    // ‚úÖ Inicializa√ß√µes seguras
    //atualizarConcursos(); // mant√©m apenas o que √© necess√°rio
  });

</script>

</body>

</html>














