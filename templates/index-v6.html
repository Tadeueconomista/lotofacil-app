<!-- === IN√çCIO DA PARTE 1 === -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Sorteio Inteligente</title>

  <!-- √çcones -->
  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="192x192" type="image/png">
  <link rel="icon" href="LOTOF√ÅCIL.png" sizes="512x512" type="image/png">

  <!-- Evita cache -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- Fonte futurista -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">

  <!-- Estilos -->
  <style>
    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      background-color: #202020;
      color: #00ffd5;
      font-family: 'Orbitron', Arial, sans-serif;
      text-align: center;
      overflow-x: hidden;
    }

    h1 {
      font-size: 20px;
      margin-bottom: 16px;
      color: #00ffd5;
    }

    #barraProgressoContainer {
      margin: 10px auto;
      height: 10px;
      background: #eee;
      border-radius: 5px;
      overflow: hidden;
      width: 200px;
      box-shadow: 0 0 6px #00ffd5;
    }

    #barraProgresso {
      height: 100%;
      background: linear-gradient(to right, #00ffd5, #00aa88);
      width: 0%;
      transition: width 0.3s ease;
    }

    #cronometroRetro {
      position: absolute;
      top: 10px;
      right: 20px;
      font-family: 'Courier New', monospace;
      font-size: 16px;
      color: #00ffd5;
      background-color: #202020;
      padding: 6px 10px;
      border-radius: 8px;
      box-shadow: 0 0 8px #00ffd5;
    }

    #entrada {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
      margin: 0 auto 20px;
      max-width: 300px;
    }

    input[type="number"] {
      width: 100%;
      padding: 6px;
      border-radius: 6px;
      border: none;
      background-color: #303030;
      color: #ffffff;
      font-size: 15px;
      font-weight: bold;
      box-shadow: 0 0 5px #00ffd5;
      text-align: center;
    }

    input[type="number"]:focus {
      outline: none;
      box-shadow: 0 0 8px #00ffd5;
    }

    button {
      background-color: rgba(0, 255, 213, 0.1);
      color: #00ffd5;
      border: 1px solid #00ffd5;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 13px;
      cursor: pointer;
      margin: 5px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      backdrop-filter: blur(6px);
      box-shadow: 0 0 12px #00ffd5;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    button:hover {
      background-color: rgba(0, 255, 213, 0.2);
      box-shadow: 0 0 20px #00ffd5;
      transform: scale(1.05);
    }

    button:active {
      transform: scale(0.95);
      box-shadow: 0 0 10px #00ff80;
    }

    .label {
      display: inline-block;
      margin: 4px;
      padding: 5px 8px;
      border-radius: 6px;
      background-color: #2196f3;
      color: white;
      font-size: 13px;
      font-weight: bold;
      box-shadow: 0 0 4px rgba(0, 255, 213, 0.3);
    }

    .sorteado {
      background-color: #ffd700 !important;
      color: #000;
      box-shadow: 0 0 6px #ffeb3b;
    }

    .jogo-comparativo {
      margin-bottom: 10px;
      padding: 8px;
      border-radius: 8px;
      background-color: black;
      box-shadow: 0 0 6px rgba(0, 255, 213, 0.2);
    }

    #statusImportacao {
      margin-bottom: 10px;
      color: #00ffd5;
      font-weight: bold;
      font-size: 15px;
    }

    .grupo-controle {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }

    .painel-tech {
      margin: 20px auto;
      max-width: 480px;
      padding: 10px;
      background-color: #1a1a1a;
      border-radius: 8px;
      box-shadow: 0 0 6px #00ffd5;
    }

    @media (max-width: 400px) {
      #entrada {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>
</head>
<body>
<!-- === FIM DA PARTE 1 === -->

<!-- === IN√çCIO DA PARTE 2 === -->
<div id="topoNumeros">
  <h2 style="color: #00ffd5;">N√∫meros Digitados</h2>
  <div id="labelsTopo" style="display: flex; flex-wrap: wrap; gap: 6px; justify-content: center;"></div>
</div>

<div id="barraProgressoContainer">
  <div id="barraProgresso"></div>
</div>

<h1>Digite at√© 15 n√∫meros de 1 a 25</h1>
<div id="entrada"></div>

<div id="cronometroRetro">‚è±Ô∏è 00:00</div>

<div class="grupo-controle">
 <button onclick="sortearComLogica()" id="btnSortear">Sortear com l√≥gica</button>
 <button id="btnSortear">Sortear com l√≥gica</button>




  <button onclick="limparTudo()">üîÑ Novo sorteio</button>
  <button onclick="avaliarConjuntoPython()">üß† Avaliar com Python</button>
  <button onclick="gerarSugestao()">üé∞ Gerar sugest√£o inteligente</button>
</div>

<div id="painelBotaoPython" class="painel-tech">
  <button onclick="importarUltimos()">üì• Importar √öltimos Concursos</button>
  <p id="infoUltimoConcurso">üìÖ √öltimo concurso: carregando...</p>
  <button onclick="sortearComFrequencia()">üìä Probabilidade hist√≥rica</button>
  <button onclick="verTriosMaisComuns()">üìä Ver trios mais comuns</button>
  <div id="tabelaTrios"></div>
  <span id="spinner" style="display:none;">‚è≥ Atualizando...</span>
  <p id="statusImportacao"></p>
  <button onclick="prepararPromissor()">üéØ Jogos Promissores</button>
  <button onclick="gerarJogosPromissores(10)">üìà Estrat√©gias Otimizadas</button>
  <button onclick="logicaGanhadorBitcoin()">ü™ô Aposta Bitcoin</button>
</div>

<div style="margin-bottom: 20px;">
  <input type="number" id="numeroConcurso" placeholder="Digite o n¬∫ do concurso" min="1">
  <button onclick="buscarConcursoEspecifico()">Buscar concurso</button>
</div>

<div id="jogosGerados"></div>
<div id="analiseEstatistica"></div>
<div id="listaConcursos"></div>
<div id="ultimoConcursoTopo"></div>
<div id="resultadoBitcoin"></div>

<div id="jogosIneditosContainer">
  <h3>üü¢ Jogos 100% In√©ditos</h3>
</div>

<div class="resultado" id="resultado"></div>
<pre id="output"></pre>
<!-- === FIM DA PARTE 2 === -->

<!-- === IN√çCIO DA PARTE 3 === -->
<script>
  // ‚úÖ Cria os inputs ao carregar
  document.addEventListener("DOMContentLoaded", gerarInputs);

  function gerarInputs() {
    const container = document.getElementById("entrada");
    container.innerHTML = "";

    for (let i = 0; i < 15; i++) {
      const input = document.createElement("input");
      input.type = "number";
      input.min = 1;
      input.max = 25;
      input.placeholder = `#${i + 1}`;
      input.id = `nome${i + 1}`;
      container.appendChild(input);
    }
  }

  function atualizarTopo(numeros) {
    const labelsTopo = document.getElementById("labelsTopo");
    labelsTopo.innerHTML = "";

    numeros.forEach(num => {
      const span = document.createElement("span");
      span.className = "label";
      span.textContent = num;
      labelsTopo.appendChild(span);
    });
  }

  function exibirResultado(numeros) {
    const resultadoDiv = document.getElementById("resultado");
    resultadoDiv.innerHTML = "";
    numeros.sort((a, b) => a - b).forEach(num => {
      const div = document.createElement("div");
      div.className = "label";
      div.textContent = num;
      resultadoDiv.appendChild(div);
    });
    atualizarTopo(numeros);
  }

  function preencherInputs(numeros) {
    const inputs = document.querySelectorAll("#entrada input");
    inputs.forEach((input, index) => {
      input.value = numeros[index] || "";
    });
    atualizarTopo(numeros);
  }

  function gerarJogoAleatorio() {
    const jogo = [];
    while (jogo.length < 15) {
      const numero = Math.floor(Math.random() * 25) + 1;
      if (!jogo.includes(numero)) jogo.push(numero);
    }
    return jogo.sort((a, b) => a - b);
  }
  
  
  async function verTriosMaisComuns() {
  const resultado = document.getElementById("resultadoBitcoin");
  if (!resultado) return;

  atualizarStatus("üîç Buscando trios mais comuns...", "#4682b4");

  try {
    const res = await fetch("trios_comuns.php");
    const dados = await res.json();

    if (!dados.trios_comuns || !Array.isArray(dados.trios_comuns)) {
      atualizarStatus("‚ö†Ô∏è Nenhum trio encontrado.", "#ff9900");
      return;
    }

    const trios = dados.trios_comuns.slice(0, 30);
    let html = `<strong>üìä Trios mais comuns:</strong><br><ul style="list-style:none; padding-left:0;">`;

    trios.forEach((item, index) => {
      const trioStr = item.trio.join(" - ");
      html += `<li>üî¢ <strong>${trioStr}</strong> ‚Äî ${item.ocorrencias}x (${item.porcentagem}%)</li>`;
      if ((index + 1) % 3 === 0) html += `<hr>`;
    });

    html += `</ul>`;
    resultado.innerHTML = html;
    atualizarStatus("‚úÖ Trios mais comuns carregados!", "#00ffd5");

  } catch (err) {
    console.error("Erro ao buscar trios:", err);
    atualizarStatus("‚ùå Falha ao buscar trios.", "#ff6347");
    resultado.innerHTML = `<p style="color: red;">‚ö†Ô∏è N√£o foi poss√≠vel carregar os trios. Verifique o servidor.</p>`;
  }
}

  function limparTudo() {
    const inputs = document.querySelectorAll('#entrada input');
    inputs.forEach(input => {
      input.value = "";
      input.style.backgroundColor = "";
      input.style.color = "";
      input.style.fontWeight = "";
      input.style.fontFamily = "";
    });

    atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");

    const resultado = document.getElementById("resultadoBitcoin");
    if (resultado) resultado.innerHTML = "";

    const topo = document.getElementById("ultimoConcursoTopo");
    if (topo) topo.innerHTML = "";

    window.jogoFixo = [];

    const container = document.getElementById("jogosGerados");
    if (container) container.innerHTML = "";

    const analise = document.getElementById("analiseEstatistica");
    if (analise) analise.innerHTML = "";

    const lista = document.getElementById("listaConcursos");
    if (lista) lista.innerHTML = "";

    const barra = document.getElementById("barraProgresso");
    if (barra) barra.style.width = "0%";
  }

  function atualizarStatus(texto, cor) {
    const status = document.getElementById("statusImportacao");
    if (status) {
      status.textContent = texto;
      status.style.color = cor;
    }
  }

  function avaliarConjuntoPython() {
    const inputs = document.querySelectorAll('#entrada input');
    const numeros = [];

    inputs.forEach(input => {
      let valor = parseInt(input.value);
      if (isNaN(valor)) {
        const limpo = input.value.replace(/\D/g, '');
        valor = parseInt(limpo);
      }
      if (!isNaN(valor) && valor >= 1 && valor <= 25) {
        numeros.push(valor);
      }
    });

    const conjuntoCorrigido = [...new Set(numeros)];

    if (conjuntoCorrigido.length !== 15) {
      atualizarStatus(`‚ö†Ô∏è Conjunto inv√°lido: ${conjuntoCorrigido.length}/15 n√∫meros √∫nicos v√°lidos.`, "#ff9900");
      return;
    }

    atualizarTopo(conjuntoCorrigido);

    const payload = "numeros=" + encodeURIComponent(JSON.stringify(conjuntoCorrigido));

    fetch("avaliar_conjunto.php", {
      method: "POST",
      headers: {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      body: payload
    })
      .then(res => res.text())
      .then(texto => {
        try {
          const dados = JSON.parse(texto);
          if (dados.erro) {
            atualizarStatus(`‚ùå Erro: ${dados.erro}`, "#ff6347");
            return;
          }

          const resultado = document.getElementById("resultadoBitcoin");
          if (!resultado || !dados.avaliacao) return;

          const av = dados.avaliacao;
          let html = `
            <strong>üìä Avalia√ß√£o Python:</strong><br>
            <ul style="list-style:none; padding-left:0;">
              <li>üßÆ Nota: <strong>${av.nota}</strong></li>
              <li>üéØ Chance de 15 acertos: <strong>${av.chance_15}%</strong></li>
              <li>üéØ Chance de 14 acertos: <strong>${av.chance_14}%</strong></li>
              <li>üèÜ Concursos com 15 acertos: <strong>${av.concursos_iguais}</strong></li>
              <li>üèÖ Concursos com 14 acertos: <strong>${av.concursos_parciais}</strong></li>
              <li>üîç Trios comuns detectados: <strong>${av.sequencias_comuns.length}</strong></li>
            </ul>
          `;

          if (av.alertas?.length) {
            html += `<p><strong>üì¢ Alertas:</strong><br>${av.alertas.join("<br>")}</p>`;
          }

          resultado.innerHTML = html;
          atualizarStatus("‚úÖ Avalia√ß√£o conclu√≠da com sucesso!", "#00ffd5");
        } catch (e) {
          console.error("‚ùå JSON inv√°lido:", e);
          atualizarStatus("‚ö†Ô∏è Retorno inv√°lido do servidor.", "#ff9900");
        }
      })
      .catch(err => {
        console.error("‚ùå Erro na requisi√ß√£o:", err);
        atualizarStatus("‚ö†Ô∏è Falha ao conectar com o servidor.", "#ff6347");
      });
  }
</script>
<!-- === FIM DA PARTE 3 === -->

<!-- === IN√çCIO DA PARTE 4 === -->
<script>
  // ‚úÖ Sugest√£o autom√°tica de jogo via backend
  function gerarSugestao() {
    const payload = "numeros=" + encodeURIComponent(JSON.stringify([])); // for√ßa sugest√£o autom√°tica

    fetch("avaliar_conjunto.php", {
      method: "POST",
      headers: {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      body: payload
    })
      .then(res => res.json())
      .then(dados => {
        if (dados.erro) {
          atualizarStatus(`‚ùå Erro: ${dados.erro}`, "#ff0000");
          return;
        }

        const sugestao = dados.sugestao;
        if (!sugestao || !Array.isArray(sugestao.jogo_sugestivo)) {
          atualizarStatus("‚ö†Ô∏è Nenhuma sugest√£o gerada.", "#ff9900");
          return;
        }

        const numeros = sugestao.jogo_sugestivo;
        preencherInputs(numeros);

        const nota = sugestao.nota ?? "N/A";
        const alertas = sugestao.alertas || [];
        atualizarStatus(`üé∞ Sugest√£o gerada | üß† Nota: ${nota} | ${alertas.join(" | ")}`, "#00ffd5");
      })
      .catch(err => {
        console.error("‚ùå Erro ao gerar sugest√£o:", err);
        atualizarStatus("‚ùå Erro ao gerar sugest√£o.", "#ff0000");
      });
  }

  // ‚úÖ Sorteio com base em frequ√™ncia hist√≥rica
  function sortearComFrequencia() {
    fetch("sortear_frequencia.php", { method: "POST" })
      .then(res => res.text())
      .then(texto => {
        if (!texto.trim()) {
          atualizarStatus("‚ùå Resposta vazia do servidor.", "#ff0000");
          console.error("‚ö†Ô∏è Nenhum conte√∫do retornado pelo backend.");
          return;
        }

        try {
          const dados = JSON.parse(texto);

          if (dados.erro) {
            atualizarStatus(`‚ùå Erro: ${dados.erro}`, "#ff0000");
            return;
          }

          const numeros = dados.jogo;
          const frequencias = dados.frequencias;

          preencherInputs(numeros);

          const detalhes = numeros.map(n => `<span class="label">[ ${n} ] ‚Üí ${frequencias[n]}x</span>`).join(" ");
          document.getElementById("resultado").innerHTML =
            `<h3>üìä Jogo baseado em frequ√™ncia hist√≥rica:</h3><div class="topo-numeros">${detalhes}</div>`;

          atualizarStatus("‚úÖ Jogo gerado com base em frequ√™ncia!", "#00ffd5");
        } catch (e) {
          atualizarStatus("‚ùå Erro ao interpretar resposta do servidor.", "#ff0000");
          console.error("üß© Conte√∫do recebido:", texto);
        }
      })
      .catch(err => {
        atualizarStatus("‚ùå Erro ao gerar jogo por frequ√™ncia.", "#ff0000");
        console.error(err);
      });
  }

  // ‚úÖ Limpa toda a interface visual e dados
  function limparInterfaceCompleta() {
    const campos = [
      "resultadoBitcoin", "jogosGerados", "analiseEstatistica",
      "statusImportacao", "labelsTopo", "ultimoConcursoTopo", "infoUltimoConcurso",
      "tabelaTrios", "listaConcursos", "resultado", "output"
    ];
    campos.forEach(id => {
      const el = document.getElementById(id);
      if (el) el.innerHTML = "";
    });

    const concursoInput = document.getElementById("numeroConcurso");
    if (concursoInput) concursoInput.value = "";

    document.querySelectorAll("input").forEach(input => {
      input.value = "";
      input.style.backgroundColor = "";
      input.style.color = "";
      input.style.fontWeight = "";
      input.style.fontFamily = "";
    });

    window.jogoFixo = [];
    atualizarStatus("üßπ Interface limpa com sucesso!", "#00ffd5");
  }
</script>
<!-- === FIM DA PARTE 4 === -->

<!-- === IN√çCIO DA PARTE 5 === -->
<script>
  async function sortearComLogica() {
  
  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("btnSortear").addEventListener("click", sortearComLogica);
  });


    const container = document.getElementById("jogosGerados");
    const barraContainer = document.getElementById("barraProgressoContainer");
    const barra = document.getElementById("barraProgresso");
    const containerIneditos = document.getElementById("jogosIneditosContainer");

    container.querySelectorAll(".jogo-comparativo").forEach(el => el.remove());
    containerIneditos.querySelectorAll(".jogo-comparativo").forEach(el => el.remove());

    // üîç Define jogo fixo
    if (!window.jogoFixo || window.jogoFixo.length !== 15) {
      const inputs = document.querySelectorAll("input[type='number']");
      const numerosDigitados = Array.from(inputs)
        .map(input => parseInt(input.value))
        .filter(n => !isNaN(n) && n >= 1 && n <= 25);

      if (numerosDigitados.length === 15) {
        window.jogoFixo = [...numerosDigitados];
        atualizarStatus("‚úÖ Jogo fixo definido manualmente!", "#2e8b57");
      } else {
        window.jogoFixo = await logicaGanhadorBitcoin();
        if (!Array.isArray(window.jogoFixo) || window.jogoFixo.length !== 15) {
          atualizarStatus("‚ùå Jogo fixo inv√°lido. Sorteio abortado.", "#ff0000");
          return;
        }
        atualizarStatus("‚úÖ Jogo fixo gerado pela Aposta Bitcoin!", "#2e8b57");
      }

      preencherInputs(window.jogoFixo);
      atualizarTopo(window.jogoFixo);
      exibirResultado(window.jogoFixo);
    }

    // üìä Frequ√™ncia hist√≥rica
    let maisFrequentes = [];
    let previstosEconometricamente = [];

    try {
      const response = await fetch("https://loteriascaixa-api.herokuapp.com/api/lotofacil");
      const concursos = await response.json();

      const frequencia = Array(26).fill(0);
      concursos.forEach(concurso => {
        if (Array.isArray(concurso.dezenas)) {
          concurso.dezenas.forEach(numStr => {
            const numero = parseInt(numStr, 10);
            if (!isNaN(numero) && numero >= 1 && numero <= 25) {
              frequencia[numero]++;
            }
          });
        }
      });

      const numerosComFrequencia = [];
      for (let i = 1; i <= 25; i++) {
        numerosComFrequencia.push({ numero: i, freq: frequencia[i] });
      }

      numerosComFrequencia.sort((a, b) => b.freq - a.freq);
      maisFrequentes = numerosComFrequencia.slice(-15).map(n => n.numero);

      const tendencia = numerosComFrequencia.map(n => ({
        numero: n.numero,
        score: n.freq + Math.random() * 5
      }));
      tendencia.sort((a, b) => b.score - a.score);
      previstosEconometricamente = tendencia.slice(-10).map(n => n.numero);

      const encontrados = window.jogoFixo.filter(num => maisFrequentes.includes(num));
      if (encontrados.length > 0) {
        atualizarStatus(`üî• ${encontrados.length} n√∫meros do jogo fixo s√£o frequentes no hist√≥rico!`, "#2e8b57");
      } else {
        atualizarStatus("üßä Nenhum n√∫mero do jogo fixo est√° entre os mais frequentes.", "#ff6347");
      }

      encontrados.forEach(num => {
        const index = window.jogoFixo.indexOf(num);
        const input = document.getElementById(`nome${index + 1}`);
        if (input) {
          input.style.backgroundColor = "#d4f4dd";
          input.style.fontWeight = "bold";
        }
      });
    } catch (erro) {
      console.error("Erro na an√°lise de frequ√™ncia:", erro);
      atualizarStatus("‚ö†Ô∏è Erro ao analisar frequ√™ncia hist√≥rica.", "#ff6347");
    }

    window.maisFrequentes = maisFrequentes;
    window.previstosEconometricamente = previstosEconometricamente;

    // üöÄ Envia para o backend
    reiniciarBarra();
    iniciarCronometro();
    barraContainer.style.display = "block";
    barra.style.width = "0%";

    try {
      const res = await fetch("/sortear-logico", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          jogo_fixo: window.jogoFixo,
          frequentes: maisFrequentes,
          previstos: previstosEconometricamente
        })
      });

      const dados = await res.json();
      pararCronometro();
      finalizarBarra();

      if (!dados.jogos || dados.jogos.length === 0) {
        atualizarStatus("üîÅ Nenhum jogo relevante encontrado.", "#ff4500");
        return;
      }

      dados.jogos.forEach(jogo => {
        const div = document.createElement("div");
        div.className = "jogo-comparativo";

        const grupo = document.createElement("div");
        grupo.style.display = "flex";
        grupo.style.flexWrap = "wrap";
        grupo.style.gap = "4px";

        jogo.numeros.forEach(num => {
          const el = document.createElement("div");
          el.className = "label";
          el.textContent = num;
          if (window.jogoFixo.includes(num)) {
            el.classList.add("sorteado");
          }
          grupo.appendChild(el);
        });

        const contador = document.createElement("div");
        contador.textContent = `Acertos: ${jogo.acertos} ${jogo.origem} ${jogo.status}`;
        contador.style.marginTop = "8px";
        contador.style.fontWeight = "bold";

        div.appendChild(grupo);
        div.appendChild(contador);

        if (jogo.status.includes("üü¢")) {
          containerIneditos.appendChild(div);
        } else {
          container.appendChild(div);
        }
      });

      atualizarStatus(`üìä Foram encontrados ${dados.jogos.length} jogos com alto potencial!`, "#228B22");

    } catch (err) {
      console.error("Erro ao buscar jogos:", err);
      pararCronometro();
      finalizarBarra();
      atualizarStatus("‚ùå Erro ao buscar jogos do backend.", "#ff6347");
    }
  }

  // üîß Fun√ß√µes auxiliares
  function atualizarStatus(texto, cor) {
    const status = document.getElementById("statusImportacao");
    if (status) {
      status.innerText = texto;
      status.style.color = cor;
    }
  }

  function reiniciarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) barra.style.width = "0%";
  }

  function atualizarBarra(percentual) {
    const barra = document.getElementById("barraProgresso");
    if (barra) barra.style.width = `${percentual}%`;
  }

  function iniciarCronometro() {
    const cronometro = document.getElementById("cronometroRetro");
    if (!cronometro) return;

    let segundosDecorridos = 0;
    cronometro.textContent = "‚è±Ô∏è 00:00";

    clearInterval(window.cronometroInterval);
    window.cronometroInterval = setInterval(() => {
      segundosDecorridos++;
      const minutos = String(Math.floor(segundosDecorridos / 60)).padStart(2, '0');
      const segundos = String(segundosDecorridos % 60).padStart(2, '0');
      cronometro.textContent = `‚è±Ô∏è ${minutos}:${segundos}`;

      const progressoPercentual = Math.min((segundosDecorridos / 30) * 100, 100);
      atualizarBarra(progressoPercentual);
    }, 1000);
  }

  function pararCronometro() {
    clearInterval(window.cronometroInterval);
  }

  function finalizarBarra() {
    atualizarBarra(100);
  }
</script>

<script>


    function gerarJogoAleatorio() {
      const numeros = [];
      while (numeros.length < 15) {
        const n = Math.floor(Math.random() * 25) + 1;
        if (!numeros.includes(n)) numeros.push(n);
      }
      return numeros.sort((a, b) => a - b);
    }

    window.gerarJogoAleatorio = gerarJogoAleatorio;

    // ‚úÖ Chama a fun√ß√£o de execu√ß√£o em blocos (definida na Parte 6)
    gerarBloco();
  }
</script>
<!-- === FIM DA PARTE 5 === -->

<!-- === IN√çCIO DA PARTE 6 === -->
<script>
  async function gerarBloco() {
  for (let i = 0; i < JOGOS_POR_BLOCO; i++) {
    const jogo = gerarJogoAleatorio();
    const acertos = jogo.filter(n => window.jogoFixo.includes(n)).length;
    const frequentesNoJogo = jogo.filter(n => window.maisFrequentes.includes(n)).length;
    const previstosNoJogo = jogo.filter(n => window.previstosEconometricamente.includes(n)).length;

    const progressoTotal = blocoAtual * JOGOS_POR_BLOCO + i;
    const progressoPercentual = (progressoTotal / TOTAL_JOGOS) * 100;
    atualizarBarra(progressoPercentual);

    if (acertos >= 12 || (frequentesNoJogo >= 8 && previstosNoJogo >= 6)) {
      const div = document.createElement("div");
      div.className = "jogo-comparativo";

      const grupo = document.createElement("div");
      grupo.style.display = "flex";
      grupo.style.flexWrap = "wrap";
      grupo.style.gap = "4px";

      jogo.forEach(num => {
        const el = document.createElement("div");
        el.className = "label";
        el.textContent = num;
        if (window.jogoFixo.includes(num)) {
          el.classList.add("sorteado");
        }
        grupo.appendChild(el);
      });

      const status = await verificarRepeticaoHistorica(jogo);
      const contador = document.createElement("div");
      const origem = acertos >= 12 ? "üéØ por acertos" : "üìà por tend√™ncia";
      contador.textContent = `Acertos: ${acertos} ${origem} ${status}`;
      contador.style.marginTop = "8px";
      contador.style.fontWeight = "bold";
      div.appendChild(grupo);
      div.appendChild(contador);

      if (status.includes("üü¢")) {
        document.getElementById("jogosIneditosContainer").appendChild(div);
      } else {
        document.getElementById("jogosGerados").appendChild(div);
      }

      jogosComAcertos++;
    }
  }

  blocoAtual++;

  if (blocoAtual < BLOCOS) {
    setTimeout(() => gerarBloco(), 50);
  } else {
    pararCronometro();
    finalizarBarra();

    atualizarStatus(
      jogosComAcertos === 0
        ? "üîÅ Nenhum jogo relevante encontrado."
        : `üìä Foram encontrados ${jogosComAcertos} jogos com alto potencial!`,
      jogosComAcertos === 0 ? "#ff4500" : "#228B22"
    );
  }
}

  function sortearAleatorios(array, quantidade) {
    const embaralhado = [...array];
    for (let i = embaralhado.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [embaralhado[i], embaralhado[j]] = [embaralhado[j], embaralhado[i]];
    }
    return embaralhado.slice(0, quantidade);
  }

  function carregarCombinacoesReais() {
    atualizarStatus("‚ö†Ô∏è Fun√ß√£o 'carregarCombinacoesReais' ainda n√£o implementada.", "#ff9900");
  }

  async function prepararPromissor() {
    try {
      const response = await fetch("https://loteriascaixa-api.herokuapp.com/api/lotofacil");
      if (!response.ok) throw new Error("API indispon√≠vel");

      const concursos = await response.json();
      if (!Array.isArray(concursos) || concursos.length === 0) {
        throw new Error("Hist√≥rico vazio ou inv√°lido");
      }

      const frequencia = Array(26).fill(0);
      concursos.forEach(concurso => {
        if (Array.isArray(concurso.dezenas)) {
          concurso.dezenas.forEach(numStr => {
            const numero = parseInt(numStr, 10);
            if (!isNaN(numero) && numero >= 1 && numero <= 25) {
              frequencia[numero]++;
            }
          });
        }
      });

      const numerosComFrequencia = [];
      for (let i = 1; i <= 25; i++) {
        numerosComFrequencia.push({ numero: i, freq: frequencia[i] });
      }

      numerosComFrequencia.sort((a, b) => a.freq - b.freq);

      const menosFrequentes = numerosComFrequencia.slice(0, 18).map(n => n.numero);
      const maisFrequentes = numerosComFrequencia.slice(-7).map(n => n.numero);

      const selecionados = [
        ...sortearAleatorios(menosFrequentes, 11),
        ...sortearAleatorios(maisFrequentes, 4)
      ];

      const promissor = selecionados.sort((a, b) => a - b);

      window.jogoFixo = promissor;
      preencherInputs(promissor);
      exibirResultado(promissor);

      const inputsTopo = document.querySelectorAll('#entrada input');
      promissor.forEach((numero, index) => {
        if (inputsTopo[index]) {
          inputsTopo[index].value = String(numero).padStart(2, '0');
          inputsTopo[index].style.backgroundColor =
            maisFrequentes.includes(numero)
              ? "#ffd700"
              : menosFrequentes.includes(numero)
                ? "#87cefa"
                : "#90ee90";

          inputsTopo[index].style.fontWeight = "bold";
          inputsTopo[index].style.fontFamily = "'Orbitron', Arial, sans-serif";
          inputsTopo[index].style.color = "#000";
        }
      });

      atualizarStatus("üéØ Jogo promissor pronto!", "#00ffd5");
    } catch (error) {
      console.error("‚ùå Erro ao preparar jogo promissor:", error);
      atualizarStatus("‚ùå Erro ao gerar jogo promissor.", "#ff0000");
    }
  }
</script>
<!-- === FIM DA PARTE 6 === -->

<!-- === IN√çCIO DA PARTE 7 === -->
<script>
  function temSequenciaLonga(jogo) {
    const ordenado = [...jogo].sort((a, b) => a - b);
    let count = 1;
    for (let i = 1; i < ordenado.length; i++) {
      if (ordenado[i] === ordenado[i - 1] + 1) {
        count++;
        if (count >= 4) return true;
      } else {
        count = 1;
      }
    }
    return false;
  }

  function distribuicaoLinhaColuna(jogo) {
    const linhas = [[], [], [], [], []];
    const colunas = [[], [], [], [], []];
    jogo.forEach(n => {
      const linha = Math.floor((n - 1) / 5);
      const coluna = (n - 1) % 5;
      linhas[linha].push(n);
      colunas[coluna].push(n);
    });
    return {
      linhasOK: linhas.filter(l => l.length >= 2 && l.length <= 4).length >= 3,
      colunasOK: colunas.filter(c => c.length >= 2 && c.length <= 4).length >= 3
    };
  }

  function analisarJogo(jogo) {
    const molduraBase = [1, 2, 3, 4, 5, 6, 10, 15, 20, 21, 22, 23, 24, 25];
    const moldura = molduraBase.filter(() => Math.random() > 0.3);
    const numerosMoldura = jogo.filter(n => moldura.includes(n)).length;
    const pares = jogo.filter(n => n % 2 === 0).length;
    const soma = jogo.reduce((a, b) => a + b, 0);
    return { moldura: numerosMoldura, pares, soma };
  }
  
  
  

  async function logicaGanhadorBitcoin() {
    try {
      const resultado = document.getElementById("resultadoBitcoin");
      const status = document.getElementById("statusImportacao");
      const inputs = document.querySelectorAll("#entrada input");

      if (!resultado || !status || inputs.length === 0) return;

      resultado.innerHTML = "";
      status.innerText = "";

      inputs.forEach(input => {
        input.value = "";
        input.style.backgroundColor = "";
        input.style.color = "";
      });

      atualizarStatus("üîÑ Carregando concursos...", "#4682b4");

      let concursos = [];

      try {
        const response = await fetch("https://loteriascaixa-api.herokuapp.com/api/lotofacil");
        if (!response.ok) throw new Error("API indispon√≠vel");
        concursos = await response.json();
      } catch {
        const local = await fetch("lotofacil_combinacoes_convertido.json");
        if (!local.ok) throw new Error("Arquivo local n√£o encontrado");
        concursos = await local.json();
      }

      if (!Array.isArray(concursos) || concursos.length === 0) {
        throw new Error("Arquivo JSON est√° vazio ou mal formatado.");
      }

      const frequencia = Array(26).fill(0);
      concursos.forEach(concurso => {
        if (Array.isArray(concurso.dezenas)) {
          concurso.dezenas.forEach(numStr => {
            const num = parseInt(numStr, 10);
            if (num >= 1 && num <= 25) frequencia[num]++;
          });
        }
      });

      const ultimoConcurso = concursos[concursos.length - 1];
      const ultimoJogo = Array.isArray(ultimoConcurso.dezenas)
        ? ultimoConcurso.dezenas.map(n => parseInt(n, 10)).filter(n => !isNaN(n))
        : [];

      const candidatos = Array.from({ length: 25 }, (_, i) => i + 1);
      let sorteioFinal = [];
      let tentativa = 0;
      let estatisticas = null;
      let temSequencia = false;
      let distrib = { linhasOK: true, colunasOK: true };

      do {
        sorteioFinal = [];
        tentativa++;

        while (sorteioFinal.length < 15) {
          const candidato = candidatos[Math.floor(Math.random() * candidatos.length)];
          const chance = Math.random();
          const repetidas = sorteioFinal.filter(n => ultimoJogo.includes(n)).length;
          const podeRepetir = !ultimoJogo.includes(candidato) || repetidas < 5;

          if (chance < 0.5 && !sorteioFinal.includes(candidato) && podeRepetir) {
            sorteioFinal.push(candidato);
          }
        }

        estatisticas = analisarJogo(sorteioFinal);
        temSequencia = temSequenciaLonga(sorteioFinal);
        distrib = distribuicaoLinhaColuna(sorteioFinal);
      } while (
        (estatisticas.moldura < 6 || estatisticas.moldura > 9 || temSequencia || !distrib.linhasOK || !distrib.colunasOK)
        && tentativa < 5000
      );

      window.jogoFixo = [...sorteioFinal];
      preencherInputs(sorteioFinal);
      exibirResultado(sorteioFinal);
      atualizarTopo(ultimoJogo);

      const sinais = sorteioFinal.map(num => {
        if (ultimoJogo.includes(num)) return `<span style="color: orange;">${num} üîÅ</span>`;
        if (frequencia[num] >= 1) return `<span style="color: green;">${num} üìà</span>`;
        return `<span style="color: blue;">${num} ‚úÖ</span>`;
      });

      resultado.innerHTML = `<strong>üîÆ Jogo estrat√©gico:</strong> ${sinais.join(", ")}`;
      atualizarStatus(`‚úÖ Estrat√©gia Bitcoin aplicada em ${tentativa} tentativas!`, "#00ffd5");
    } catch (erro) {
      console.error("Erro na l√≥gica Bitcoin:", erro);
      atualizarStatus("‚ùå Falha na estrat√©gia Bitcoin.", "#ff6347");
      const resultado = document.getElementById("resultadoBitcoin");
      if (resultado) {
        resultado.innerHTML = `<p style="color: red;">‚ö†Ô∏è N√£o foi poss√≠vel acessar os concursos. Verifique a conex√£o ou o arquivo local.</p>`;
      }
    }
  }

  // ‚úÖ Inicializa vari√°veis globais
  window.jogoFixo = [];

  // ‚úÖ Cron√¥metro retr√¥ + barra sincronizada
  let cronometroInterval;
  let segundosDecorridos = 0;
  const DURACAO_ESTIMADA_SEGUNDOS = 250;

  function iniciarCronometro() {
    const cronometro = document.getElementById("cronometroRetro");
    if (!cronometro) return;

    segundosDecorridos = 0;
    cronometro.textContent = "‚è±Ô∏è 00:00";

    clearInterval(cronometroInterval);
    cronometroInterval = setInterval(() => {
      segundosDecorridos++;
      const minutos = String(Math.floor(segundosDecorridos / 60)).padStart(2, '0');
      const segundos = String(segundosDecorridos % 60).padStart(2, '0');
      cronometro.textContent = `‚è±Ô∏è ${minutos}:${segundos}`;

      const progressoPercentual = Math.min((segundosDecorridos / DURACAO_ESTIMADA_SEGUNDOS) * 100, 100);
      atualizarBarra(progressoPercentual);
    }, 1000);
  }

  function pararCronometro() {
    clearInterval(cronometroInterval);
  }

  function reiniciarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "0%";
      barra.style.display = "block";
    }
  }

  function atualizarBarra(progressoPercentual) {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = `${progressoPercentual}%`;
    }
  }

  function finalizarBarra() {
    const barra = document.getElementById("barraProgresso");
    if (barra) {
      barra.style.width = "100%";
      setTimeout(() => {
        barra.style.display = "none";
      }, 1000);
    }
  }
  
  function importarUltimos() {
  fetch("https://loteriascaixa-api.herokuapp.com/api/lotofacil")
    .then(res => res.json())
    .then(concursos => {
      if (!Array.isArray(concursos) || concursos.length === 0) {
        atualizarStatus("‚ö†Ô∏è Nenhum concurso encontrado.", "#ff9900");
        return;
      }

      const ultimo = concursos[concursos.length - 1];
      const dezenas = Array.isArray(ultimo.dezenas) ? ultimo.dezenas.map(n => parseInt(n, 10)) : [];

      preencherInputs(dezenas);
      exibirResultado(dezenas);
      document.getElementById("infoUltimoConcurso").textContent = `üìÖ √öltimo concurso: ${ultimo.numero || "?"}`;
      atualizarStatus("‚úÖ √öltimo concurso importado!", "#00ffd5");
    })
    .catch(err => {
      console.error("Erro ao importar √∫ltimos concursos:", err);
      atualizarStatus("‚ùå Falha ao importar concursos.", "#ff6347");
    });
}
  
  function gerarJogosPromissores(qtd) {
  const container = document.getElementById("jogosGerados");
  container.innerHTML = "<h3>üìà Estrat√©gias Otimizadas:</h3>";

  for (let i = 0; i < qtd; i++) {
    const jogo = gerarJogoAleatorio();
    const div = document.createElement("div");
    div.className = "jogo-comparativo";

    jogo.forEach(num => {
      const span = document.createElement("span");
      span.className = "label";
      span.textContent = num;
      div.appendChild(span);
    });

    container.appendChild(div);
  }

  atualizarStatus(`${qtd} jogos gerados com estrat√©gia!`, "#00ffd5");
}

  // ‚úÖ Registro global de fun√ß√µes
  document.addEventListener("DOMContentLoaded", () => {
    window.sortearComLogica = sortearComLogica;
    window.gerarJogosPromissores = gerarJogosPromissores;
    window.importarUltimos = importarUltimos;
    window.verTriosMaisComuns = verTriosMaisComuns;
    window.avaliarConjuntoPython = avaliarConjuntoPython;
    window.gerarSugestao = gerarSugestao;
	
    window.sortearComFrequencia = sortearComFrequencia;
	
    window.prepararPromissor = prepararPromissor;
    window.logicaGanhadorBitcoin = logicaGanhadorBitcoin;
    window.buscarConcursoEspecifico = buscarConcursoEspecifico;

    // Fun√ß√µes auxiliares
    window.limparInterfaceCompleta = limparInterfaceCompleta;
    window.limparJogoFixo = limparJogoFixo;
    window.carregarCombinacoesReais = carregarCombinacoesReais;
    window.atualizarConcursos = atualizarConcursos;
    window.exibirResultado = exibirResultado;
    window.preencherInputs = preencherInputs;
    window.atualizarStatus = atualizarStatus;
    window.atualizarTopo = atualizarTopo;

    // Cron√¥metro e barra
    window.iniciarCronometro = iniciarCronometro;
    window.pararCronometro = pararCronometro;
    window.reiniciarBarra = reiniciarBarra;
    window.atualizarBarra = atualizarBarra;
    window.finalizarBarra = finalizarBarra;

    // ‚úÖ Inicializa√ß√µes seguras
    atualizarConcursos(); // mant√©m apenas o que √© necess√°rio
  });
   document.getElementById("btnSortear").addEventListener("click", sortearComLogica);


</script>
<!-- === FIM DA PARTE 7 === -->

<!-- === IN√çCIO DA PARTE 8 === -->
</body>
</html>
<!-- === FIM DA PARTE 8 === -->













